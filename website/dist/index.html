<!DOCTYPE html><html lang="en" class="bg-black text-white"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Astro v5.17.3"><!-- Primary meta --><title>PR Review Kit ‚Äî AI-Driven Pull Request Review</title><meta name="description" content="AI-driven Pull Request code review ‚Äî structured, multi-perspective, actionable. Works with GitHub, GitLab, Azure DevOps, and Bitbucket."><meta name="keywords" content="PR review, pull request review, AI code review, Claude Code, GitHub Copilot, Cursor, code review automation, static analysis, GitHub, GitLab, Azure DevOps, Bitbucket"><meta name="author" content="PR Review Kit"><link rel="canonical" href="https://prr-kit.dev"><!-- Robots --><meta name="robots" content="index, follow"><meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><!-- Open Graph --><meta property="og:site_name" content="PR Review Kit"><meta property="og:title" content="PR Review Kit ‚Äî AI-Driven Pull Request Review"><meta property="og:description" content="AI-driven Pull Request code review ‚Äî structured, multi-perspective, actionable. Works with GitHub, GitLab, Azure DevOps, and Bitbucket."><meta property="og:type" content="website"><meta property="og:url" content="https://prr-kit.dev"><meta property="og:image" content="https://prr-kit.dev/banner.svg"><meta property="og:image:alt" content="PR Review Kit ‚Äî AI-Driven Pull Request Review"><meta property="og:locale" content="en_US"><!-- Twitter / X Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@prrkit"><meta name="twitter:creator" content="@prrkit"><meta name="twitter:title" content="PR Review Kit ‚Äî AI-Driven Pull Request Review"><meta name="twitter:description" content="AI-driven Pull Request code review ‚Äî structured, multi-perspective, actionable. Works with GitHub, GitLab, Azure DevOps, and Bitbucket."><meta name="twitter:image" content="https://prr-kit.dev/banner.svg"><meta name="twitter:image:alt" content="PR Review Kit ‚Äî AI-Driven Pull Request Review"><!-- Theme --><meta name="theme-color" content="#000000"><meta name="color-scheme" content="dark"><meta name="msapplication-TileColor" content="#000000"><!-- Favicons --><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="apple-touch-icon" href="/favicon.svg"><!-- Fonts: Inter + JetBrains Mono --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/configuration.BHNRvZvT.css">
<link rel="stylesheet" href="/_astro/index.CSGacw4y.css"></head> <body class="bg-black text-white antialiased" style="font-family: 'Inter', sans-serif;">  <nav class="fixed top-0 left-0 right-0 z-50 border-b border-white/10 backdrop-blur-md bg-black/80" data-astro-cid-5blmo7yk> <div class="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between" data-astro-cid-5blmo7yk> <!-- Logo --> <a href="/" class="flex items-center gap-2.5 group" data-astro-cid-5blmo7yk> <div class="w-8 h-8 bg-white rounded-md flex items-center justify-center flex-shrink-0" data-astro-cid-5blmo7yk> <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" data-astro-cid-5blmo7yk> <path d="M3 4.5L7.5 9L3 13.5" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-5blmo7yk></path> <path d="M9 13.5H15" stroke="#000" stroke-width="2" stroke-linecap="round" data-astro-cid-5blmo7yk></path> </svg> </div> <span class="hidden md:inline font-bold text-white tracking-tight" data-astro-cid-5blmo7yk>PR Review Kit</span> </a> <!-- Nav links --> <div class="hidden md:flex items-center gap-8" data-astro-cid-5blmo7yk> <a href="#how-it-works" class="text-sm text-white/60 hover:text-white transition-colors" data-astro-cid-5blmo7yk>How it works</a> <a href="#platforms" class="text-sm text-white/60 hover:text-white transition-colors" data-astro-cid-5blmo7yk>Platforms</a> <a href="#quick-start" class="text-sm text-white/60 hover:text-white transition-colors" data-astro-cid-5blmo7yk>Quick Start</a> <a href="/docs" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 text-sm text-white/60 hover:text-white transition-colors" data-astro-cid-5blmo7yk>
Documentation
<svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="opacity-40" data-astro-cid-5blmo7yk> <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" data-astro-cid-5blmo7yk></path> </svg> </a> </div> <!-- IDE Selector + Hamburger --> <div class="flex items-center gap-2.5" data-astro-cid-5blmo7yk> <span class="hidden md:inline text-xs text-white/35 font-medium tracking-widest uppercase select-none" data-astro-cid-5blmo7yk>Your IDE</span> <div class="prr-ide-select" data-astro-cid-5blmo7yk> <label class="_input-label_15j4s_43 _select_1uoff_1">  <div class="_wrapper_15j4s_52">
   <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1 6L12 17L23 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
 
  <input type="text" class="_input_15j4s_1" readonly placeholder="Select your IDE" data-id="w-select-ide" data-astro-cid-5blmo7yk="true"> 

</div>  </label> <dialog class="_popover_1a1rg_1 _popover_1uoff_15" data-id="w-options-ide">  <div class="_container_7gwg9_72" data-id="w-list-wrapper">   <input type="search" class="_input_15j4s_1" placeholder="Search your IDE" data-id="w-list-search"> 
  <ul class="_list_7gwg9_1" data-id="w-list" style="max-height: 320px"> <li class="_title_7gwg9_19" data-id="w-list-title"> Recommended </li><li tabindex="0" data-value="claude-code" data-name="Claude Code">     <img src="/logos/claude.svg" width="16" height="16" style="object-fit:contain;flex-shrink:0" /><div>Claude Code</div>   </li><li tabindex="0" data-value="cursor" data-name="Cursor">     <img src="/logos/cursor.webp" width="16" height="16" style="object-fit:contain;flex-shrink:0;filter:invert(1)" /><div>Cursor</div>   </li><li tabindex="0" data-value="windsurf" data-name="Windsurf">     <img src="/logos/windsurf.webp" width="16" height="16" style="object-fit:contain;flex-shrink:0" /><div>Windsurf</div>   </li><li tabindex="0" data-value="github-copilot" data-name="GitHub Copilot">     <img src="/logos/github-copilot.webp" width="16" height="16" style="object-fit:contain;flex-shrink:0;filter:invert(1)" /><div>GitHub Copilot</div>   </li><li tabindex="0" data-value="antigravity" data-name="Antigravity">     <img src="/logos/antigravity.webp" width="16" height="16" style="object-fit:contain;flex-shrink:0" /><div>Antigravity</div>   </li><li class="_title_7gwg9_19" data-id="w-list-title"> Others </li><li tabindex="0" data-value="auggie" data-name="Auggie">     <div>Auggie</div>   </li><li tabindex="0" data-value="cline" data-name="Cline">     <div>Cline</div>   </li><li tabindex="0" data-value="codex" data-name="Codex">     <div>Codex</div>   </li><li tabindex="0" data-value="crush" data-name="Crush">     <div>Crush</div>   </li><li tabindex="0" data-value="gemini" data-name="Gemini CLI">     <div>Gemini CLI</div>   </li><li tabindex="0" data-value="iflow" data-name="iFlow">     <div>iFlow</div>   </li><li tabindex="0" data-value="kilo" data-name="KiloCoder">     <div>KiloCoder</div>   </li><li tabindex="0" data-value="kiro" data-name="Kiro">     <div>Kiro</div>   </li><li tabindex="0" data-value="opencode" data-name="OpenCode">     <div>OpenCode</div>   </li><li tabindex="0" data-value="qwen" data-name="QwenCoder">     <div>QwenCoder</div>   </li><li tabindex="0" data-value="roo" data-name="Roo Cline">     <div>Roo Cline</div>   </li><li tabindex="0" data-value="rovo-dev" data-name="Rovo Dev">     <div>Rovo Dev</div>   </li><li tabindex="0" data-value="trae" data-name="Trae">     <div>Trae</div>   </li> <li data-id="w-no-results" data-hidden>No results.</li> </ul> 
</div> <script type="module" src="/_astro/List.astro_astro_type_script_index_0_lang.D2qrS2dN.js"></script>  </dialog> <script type="module" src="/_astro/Select.astro_astro_type_script_index_0_lang.DUyZEFxF.js"></script> </div> <!-- Hamburger button (mobile only) --> <button id="nav-hamburger" class="md:hidden flex items-center justify-center w-8 h-8 text-white/60 hover:text-white transition-colors" aria-label="Menu" data-astro-cid-5blmo7yk> <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-astro-cid-5blmo7yk> <line x1="3" y1="6" x2="21" y2="6" data-astro-cid-5blmo7yk></line> <line x1="3" y1="12" x2="21" y2="12" data-astro-cid-5blmo7yk></line> <line x1="3" y1="18" x2="21" y2="18" data-astro-cid-5blmo7yk></line> </svg> </button> </div> </div> <!-- Mobile menu --> <div id="mobile-menu" class="hidden border-t border-white/10 bg-black/95 md:hidden" data-astro-cid-5blmo7yk> <div class="px-6 py-3 flex flex-col" data-astro-cid-5blmo7yk> <a href="#how-it-works" class="py-3 text-sm text-white/60 hover:text-white transition-colors border-b border-white/5" data-astro-cid-5blmo7yk>How it works</a> <a href="#platforms" class="py-3 text-sm text-white/60 hover:text-white transition-colors border-b border-white/5" data-astro-cid-5blmo7yk>Platforms</a> <a href="#quick-start" class="py-3 text-sm text-white/60 hover:text-white transition-colors border-b border-white/5" data-astro-cid-5blmo7yk>Quick Start</a> <a href="/docs" target="_blank" rel="noopener noreferrer" class="py-3 flex items-center gap-1.5 text-sm text-white/60 hover:text-white transition-colors" data-astro-cid-5blmo7yk>
Documentation
<svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" class="opacity-40" data-astro-cid-5blmo7yk> <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" data-astro-cid-5blmo7yk></path> </svg> </a> </div> </div> </nav>  <script type="module">const a={"claude-code":{src:"/logos/claude.svg"},cursor:{src:"/logos/cursor.webp",invert:!0},windsurf:{src:"/logos/windsurf.webp"},"github-copilot":{src:"/logos/github-copilot.webp",invert:!0},antigravity:{src:"/logos/antigravity.webp"}},d={"claude-code":"Claude Code",cursor:"Cursor",windsurf:"Windsurf",antigravity:"Antigravity",auggie:"Auggie",cline:"Cline",codex:"Codex",crush:"Crush",gemini:"Gemini CLI","github-copilot":"GitHub Copilot",iflow:"iFlow",kilo:"KiloCoder",kiro:"Kiro",opencode:"OpenCode",qwen:"QwenCoder",roo:"Roo Cline","rovo-dev":"Rovo Dev",trae:"Trae"};function s(t){const e=document.querySelector('[data-id="w-select-ide"]'),o=a[t],r=document.getElementById("ide-selected-logo");if(r&&r.remove(),o&&e){const n=e.closest("label");if(!n)return;n.style.position="relative";const i=document.createElement("img");i.id="ide-selected-logo",i.src=o.src,i.width=16,i.height=16,i.style.cssText=`
        position:absolute;left:0.625rem;top:50%;transform:translateY(-50%);
        object-fit:contain;pointer-events:none;z-index:10;flex-shrink:0;
        ${o.invert?"filter:invert(1)":""}
      `,n.appendChild(i),e.style.paddingLeft="2rem"}else e&&(e.style.paddingLeft="")}function c(){const t=localStorage.getItem("prr-ide")||"claude-code";{const e=document.querySelector('[data-id="w-select-ide"]');e&&d[t]&&(e.value=d[t]),s(t)}window.dispatchEvent(new CustomEvent("prr-ide-changed",{detail:t}))}document.addEventListener("selectOnChange",t=>{const e=t.detail;e?.select==="ide"&&(localStorage.setItem("prr-ide",e.value),s(e.value),window.dispatchEvent(new CustomEvent("prr-ide-changed",{detail:e.value})))});document.addEventListener("astro:after-swap",c);c();function l(){const t=document.getElementById("nav-hamburger"),e=document.getElementById("mobile-menu");!t||!e||(t.addEventListener("click",()=>{e.classList.toggle("hidden")}),e.querySelectorAll("a").forEach(o=>{o.addEventListener("click",()=>{e.classList.add("hidden")})}))}document.addEventListener("astro:after-swap",l);l();</script> <main> <section class="relative min-h-screen flex flex-col items-center justify-center overflow-hidden"> <!-- Three.js canvas --> <canvas id="hero-canvas" class="absolute inset-0 w-full h-full"></canvas> <!-- Vignette overlay --> <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,transparent_30%,#000_100%)] pointer-events-none z-10"></div> <!-- Bottom fade --> <div class="absolute bottom-0 left-0 right-0 h-40 bg-gradient-to-t from-black to-transparent pointer-events-none z-10"></div> <!-- Content --> <div class="relative z-20 max-w-5xl mx-auto px-6 text-center pt-24 flex flex-col justify-center items-center"> <!-- Main headline --> <h1 class="font-black tracking-tight leading-[0.9]"> <span class="block text-[clamp(3rem,10vw,7rem)] text-white">AI-Driven</span> <span class="block text-[clamp(3rem,10vw,7rem)]" style="
        background: linear-gradient(135deg, #fff 0%, #aaa 40%, #555 70%, #fff 100%);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      ">PR Review</span> </h1> <!-- Subtitle --> <p class="text-lg md:text-xl text-white/40 max-w-3xl mx-auto leading-relaxed mb-12 font-light">
Structured, multi-perspective, actionable code review.
<br class="hidden md:block">
Powered by your AI IDE. No server. No API keys.
</p> <!-- Install command --> <div class="flex justify-center mb-10"> <div class="group flex items-center gap-3 bg-white/[0.06] hover:bg-white/[0.09] border border-white/10 hover:border-white/20 rounded-xl px-6 py-4 font-mono text-sm text-white/70 transition-all duration-300 cursor-text backdrop-blur-sm"> <span class="text-white/25 select-none">$</span> <span id="install-cmd" class="text-white/80">npx prr-kit install</span> <button id="copy-btn" class="ml-2 text-white/25 hover:text-white transition-colors cursor-pointer flex-shrink-0" title="Copy"> <svg id="copy-icon" class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path> </svg> <svg id="check-icon" class="w-4 h-4 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> </button> </div> </div> <!-- CTA Buttons --> <div class="flex items-center justify-center gap-4 flex-wrap mb-8"> <a href="#quick-start" class="inline-flex items-center gap-2 px-7 py-3.5 bg-white text-black! text-sm font-bold rounded-xl hover:bg-white/90 active:scale-[0.98] transition-all duration-150" style="color: #000 !important;">
Get Started
<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"> <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path> </svg> </a> <a href="https://github.com/mrquangthai278/prr-kit" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-7 py-3.5 bg-transparent text-white text-sm font-semibold rounded-xl border border-white/20 hover:border-white/40 hover:bg-white/5 active:scale-[0.98] transition-all duration-150"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0 1 12 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path> </svg>
View on GitHub
</a> </div> <!-- IDE Support Badges --> <div class="flex flex-col items-center gap-3 mb-20"> <p class="text-xs text-white/25 uppercase tracking-widest font-medium">Works with</p> <div class="flex flex-wrap items-center justify-center gap-2"> <span class="flex items-center gap-1.5 px-3 py-1.5 bg-white/8 border border-white/20 rounded-full text-xs font-medium text-white/60"> <img src="/logos/claude.svg" alt="Claude Code" width="13" height="13" class="object-contain flex-shrink-0"> Claude Code </span><span class="flex items-center gap-1.5 px-3 py-1.5 bg-white/8 border border-white/20 rounded-full text-xs font-medium text-white/60"> <img src="/logos/cursor.webp" alt="Cursor" width="13" height="13" class="object-contain flex-shrink-0 invert"> Cursor </span><span class="flex items-center gap-1.5 px-3 py-1.5 bg-white/8 border border-white/20 rounded-full text-xs font-medium text-white/60"> <img src="/logos/windsurf.webp" alt="Windsurf" width="13" height="13" class="object-contain flex-shrink-0"> Windsurf </span><span class="flex items-center gap-1.5 px-3 py-1.5 bg-white/8 border border-white/20 rounded-full text-xs font-medium text-white/60"> <img src="/logos/github-copilot.webp" alt="GitHub Copilot" width="13" height="13" class="object-contain flex-shrink-0 invert"> GitHub Copilot </span><span class="flex items-center gap-1.5 px-3 py-1.5 bg-white/8 border border-white/20 rounded-full text-xs font-medium text-white/60"> <img src="/logos/antigravity.webp" alt="Antigravity" width="13" height="13" class="object-contain flex-shrink-0"> Antigravity </span> <span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-full text-xs font-medium text-white/30">
+13 more
</span> </div> </div> </div> <!-- Scroll indicator --> <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-20 flex flex-col items-center gap-2 animate-bounce"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="text-white/20"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 9l-7 7-7-7"></path> </svg> </div> </section> <script type="module" src="/_astro/Hero.astro_astro_type_script_index_0_lang.Dzr3V4C8.js"></script> <section id="why-prr-kit" class="py-24 px-6 border-t border-white/10"> <div class="max-w-6xl mx-auto"> <div class="text-center mb-16 flex flex-col justify-center items-center"> <span class="_badge_19a8b_1 _outline_19a8b_22 _round_19a8b_74 text-xs mb-6"> Why PRR Kit </span> <h2 class="text-4xl md:text-5xl font-black tracking-tight text-white mb-4">Built different.</h2> <p class="text-white/50 text-lg max-w-xl mx-auto">
No server. No subscription. No black box.
</p> </div> <div class="grid md:grid-cols-2 gap-6 mb-6"> <div class="relative p-8 bg-white/3 border border-white/15 rounded-2xl overflow-hidden group hover:border-white/25 hover:bg-white/5 transition-all duration-300"> <div class="absolute inset-0 bg-gradient-to-br from-white/3 to-transparent pointer-events-none rounded-2xl"></div> <div class="relative"> <div class="flex items-center gap-3 mb-5"> <div class="w-11 h-11 bg-white/10 rounded-xl flex items-center justify-center text-white group-hover:bg-white/15 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" /></svg></div> <span class="text-xs font-bold text-white/30 uppercase tracking-widest">Privacy</span> </div> <h3 class="text-xl font-bold text-white mb-2">Your code never leaves your machine</h3> <p class="text-white/50 text-sm leading-relaxed">No server, no third-party API calls, no data collection. Safe for codebases under NDA or corporate security policy.</p> </div> </div><div class="relative p-8 bg-white/3 border border-white/15 rounded-2xl overflow-hidden group hover:border-white/25 hover:bg-white/5 transition-all duration-300"> <div class="absolute inset-0 bg-gradient-to-br from-white/3 to-transparent pointer-events-none rounded-2xl"></div> <div class="relative"> <div class="flex items-center gap-3 mb-5"> <div class="w-11 h-11 bg-white/10 rounded-xl flex items-center justify-center text-white group-hover:bg-white/15 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div> <span class="text-xs font-bold text-white/30 uppercase tracking-widest">Cost</span> </div> <h3 class="text-xl font-bold text-white mb-2">Free forever (MIT)</h3> <p class="text-white/50 text-sm leading-relaxed">No subscription, no credit card, no usage limits. Install into as many repos as you want.</p> </div> </div> </div> <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6"> <div class="p-6 bg-white/3 border border-white/10 rounded-2xl group hover:border-white/20 hover:bg-white/5 transition-all duration-300"> <div class="w-10 h-10 bg-white/8 rounded-lg flex items-center justify-center text-white mb-4 group-hover:bg-white/12 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5" /></svg></div> <div class="text-xs font-bold text-white/25 uppercase tracking-widest mb-2">IDE Agnostic</div> <h3 class="text-sm font-bold text-white mb-1.5 leading-snug">Uses the AI you already have</h3> <p class="text-xs text-white/40 leading-relaxed">Claude Code, Cursor, Windsurf, Copilot, and 14+ more. No extra API keys.</p> </div><div class="p-6 bg-white/3 border border-white/10 rounded-2xl group hover:border-white/20 hover:bg-white/5 transition-all duration-300"> <div class="w-10 h-10 bg-white/8 rounded-lg flex items-center justify-center text-white mb-4 group-hover:bg-white/12 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z" /></svg></div> <div class="text-xs font-bold text-white/25 uppercase tracking-widest mb-2">Open Source</div> <h3 class="text-sm font-bold text-white mb-1.5 leading-snug">Fully customizable</h3> <p class="text-xs text-white/40 leading-relaxed">Every workflow is a Markdown or YAML file. Fork it, extend it, make it yours.</p> </div><div class="p-6 bg-white/3 border border-white/10 rounded-2xl group hover:border-white/20 hover:bg-white/5 transition-all duration-300"> <div class="w-10 h-10 bg-white/8 rounded-lg flex items-center justify-center text-white mb-4 group-hover:bg-white/12 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008z" /></svg></div> <div class="text-xs font-bold text-white/25 uppercase tracking-widest mb-2">Business Review</div> <h3 class="text-sm font-bold text-white mb-1.5 leading-snug">Findings in business language</h3> <p class="text-xs text-white/40 leading-relaxed">Translates code risks into user impact, GDPR exposure, and deployment recommendations.</p> </div><div class="p-6 bg-white/3 border border-white/10 rounded-2xl group hover:border-white/20 hover:bg-white/5 transition-all duration-300"> <div class="w-10 h-10 bg-white/8 rounded-lg flex items-center justify-center text-white mb-4 group-hover:bg-white/12 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253M3 12c0 .778.099 1.533.284 2.253" /></svg></div> <div class="text-xs font-bold text-white/25 uppercase tracking-widest mb-2">Platforms</div> <h3 class="text-sm font-bold text-white mb-1.5 leading-snug">GitHub, GitLab, Azure, Bitbucket</h3> <p class="text-xs text-white/40 leading-relaxed">Auto-detects your platform and posts reviews to the right place.</p> </div> </div> </div> </section> <section id="live-demo" class="py-24 px-6 border-t border-white/10" data-astro-cid-v2zj7lir> <div class="max-w-7xl mx-auto" data-astro-cid-v2zj7lir> <!-- Header --> <div class="text-center mb-6 flex flex-col justify-center items-center" data-astro-cid-v2zj7lir> <span class="_badge_19a8b_1 _outline_19a8b_22 _round_19a8b_74 text-xs mb-6" data-astro-cid-v2zj7lir="true"> Live Example </span> <h2 class="text-4xl md:text-5xl font-black tracking-tight text-white mb-4" data-astro-cid-v2zj7lir>
See the difference.
</h2> <p class="text-white/50 text-lg max-w-2xl mx-auto" data-astro-cid-v2zj7lir>
Same PR. Same AI. Completely different output.
</p> </div> <!-- PR Context note --> <div class="mb-10 flex justify-center" data-astro-cid-v2zj7lir> <div class="inline-flex flex-wrap items-center gap-x-3 gap-y-2 px-5 py-3 bg-white/[0.04] border border-white/10 rounded-xl text-sm text-white/40" data-astro-cid-v2zj7lir> <span class="flex items-center gap-1.5" data-astro-cid-v2zj7lir> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="text-white/30" data-astro-cid-v2zj7lir> <path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm0 2c4.418 0 8 3.582 8 8s-3.582 8-8 8-8-3.582-8-8 3.582-8 8-8zm0 3a5 5 0 100 10A5 5 0 0012 7zm0 2a3 3 0 110 6 3 3 0 010-6z" data-astro-cid-v2zj7lir></path> </svg>
Both reviews generated by <span class="text-white/60 font-medium" data-astro-cid-v2zj7lir>GitHub Copilot</span> <span class="text-white/15" data-astro-cid-v2zj7lir>with</span> <code class="text-white/60 font-mono text-xs bg-white/8 px-1.5 py-0.5 rounded" data-astro-cid-v2zj7lir>claude-sonnet-4-5</code> </span> <span class="text-white/15 hidden sm:inline" data-astro-cid-v2zj7lir>¬∑</span> <span class="flex items-center gap-1.5" data-astro-cid-v2zj7lir>
Project:&nbsp;
<a href="https://github.com/twentyhq/twenty" target="_blank" rel="noopener noreferrer" class="text-white/60 hover:text-white transition-colors font-medium underline underline-offset-2 decoration-white/20" data-astro-cid-v2zj7lir>twentyhq/twenty</a> </span> <span class="text-white/15 hidden sm:inline" data-astro-cid-v2zj7lir>¬∑</span> <span data-astro-cid-v2zj7lir>Branch: <code class="text-white/60 font-mono text-xs bg-white/8 px-1.5 py-0.5 rounded" data-astro-cid-v2zj7lir>ai-models-and-bedrock</code></span> <span class="text-white/15 hidden sm:inline" data-astro-cid-v2zj7lir>¬∑</span> <a href="https://github.com/twentyhq/twenty/pull/18155" target="_blank" rel="noopener noreferrer" class="text-white/60 hover:text-white transition-colors font-medium underline underline-offset-2 decoration-white/20" data-astro-cid-v2zj7lir>PR #18155</a> </div> </div> <!-- Two review blocks --> <div class="grid lg:grid-cols-2 gap-6" data-astro-cid-v2zj7lir> <!-- Without PRR Kit --> <div class="flex flex-col bg-white/[0.02] border border-white/10 rounded-2xl overflow-hidden" data-astro-cid-v2zj7lir> <div class="flex items-center gap-3 px-5 py-4 border-b border-white/8 bg-white/[0.03] flex-shrink-0" data-astro-cid-v2zj7lir> <div class="flex gap-1.5" data-astro-cid-v2zj7lir> <span class="w-3 h-3 rounded-full bg-red-500/60" data-astro-cid-v2zj7lir></span> <span class="w-3 h-3 rounded-full bg-yellow-500/60" data-astro-cid-v2zj7lir></span> <span class="w-3 h-3 rounded-full bg-green-500/60" data-astro-cid-v2zj7lir></span> </div> <span class="text-xs font-semibold text-white/30 uppercase tracking-widest ml-1" data-astro-cid-v2zj7lir>Without PRR Kit</span> <div class="ml-auto flex items-center gap-3" data-astro-cid-v2zj7lir> <span class="flex items-center gap-1.5 text-xs text-white/20" data-astro-cid-v2zj7lir> <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-astro-cid-v2zj7lir> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" data-astro-cid-v2zj7lir></path> </svg>
Standard review
</span> <button class="fullscreen-btn text-white/25 hover:text-white/70 transition-colors cursor-pointer p-1 rounded hover:bg-white/8" data-title="Without PRR Kit" data-variant="without" title="Open fullscreen" data-astro-cid-v2zj7lir> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8" data-astro-cid-v2zj7lir> <path stroke-linecap="round" stroke-linejoin="round" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" data-astro-cid-v2zj7lir></path> </svg> </button> </div> </div> <div id="content-without" class="overflow-y-auto h-[560px] px-6 py-5 md-content md-content--without" data-astro-cid-v2zj7lir><h1>Code Review: Branch ai-models-and-bedrock</h1>
<p><strong>Review Date:</strong> February 22, 2026<br><strong>Branch:</strong> <code>ai-models-and-bedrock</code><br><strong>Base branch:</strong> <code>main</code><br><strong>Total files changed:</strong> 27 files (+1272, -341 lines)</p>
<hr>
<h2>üìã Executive Summary</h2>
<p>This branch implements a major refactor of Twenty&#39;s AI models system with the following key changes:</p>
<ol>
<li><strong>Expanded AI provider support</strong>: Added AWS Bedrock, Google (Gemini), and Mistral</li>
<li><strong>Restructured pricing</strong>: Migrated from per-1k-tokens to per-million-tokens with cached input pricing</li>
<li><strong>Improved type safety</strong>: Renamed <code>ModelProvider</code> to <code>InferenceProvider</code> and separated <code>ModelFamily</code></li>
<li><strong>Updated billing system</strong>: Adjusted cost calculation logic to align with new structure</li>
<li><strong>Deprecation marking</strong>: Marked legacy models for backward compatibility</li>
</ol>
<hr>
<h2>üéØ Major Changes</h2>
<h3>1. Type System Refactoring</h3>
<h4><strong>File: <code>ai-models-types.const.ts</code></strong></h4>
<p><strong>Key Changes:</strong></p>
<pre><code class="language-typescript">// OLD
export enum ModelProvider {
  OPENAI = &#39;openai&#39;,
  ANTHROPIC = &#39;anthropic&#39;,
  // ...
}

export interface AIModelConfig {
  provider: ModelProvider;
  inputCostPer1kTokensInCents: number;
  outputCostPer1kTokensInCents: number;
}

// NEW
export enum ModelFamily {
  OPENAI = &#39;openai&#39;,
  ANTHROPIC = &#39;anthropic&#39;,
  BEDROCK = &#39;bedrock&#39;,
  GOOGLE = &#39;google&#39;,
  MISTRAL = &#39;mistral&#39;,
  // ...
}

export enum InferenceProvider {
  OPENAI = &#39;openai&#39;,
  ANTHROPIC = &#39;anthropic&#39;,
  BEDROCK = &#39;bedrock&#39;,
  // ...
}

export interface AIModelConfig {
  modelFamily: ModelFamily;
  inferenceProvider: InferenceProvider;
  inputCostPerMillionTokens: number;
  outputCostPerMillionTokens: number;
  cachedInputCostPerMillionTokens?: number;
  deprecated?: boolean;
}
</code></pre>
<p><strong>Significance:</strong></p>
<ul>
<li>Separates <strong>model family</strong> (model group) from <strong>inference provider</strong> (inference infrastructure)</li>
<li>Enables greater flexibility (e.g., running Anthropic models through AWS Bedrock)</li>
<li>Clearer pricing structure with per-million-tokens (industry standard)</li>
<li>Supports <strong>prompt caching</strong> via <code>cachedInputCostPerMillionTokens</code></li>
</ul>
<hr>
<h3>2. Added AWS Bedrock Support</h3>
<h4><strong>New File: <code>bedrock-models.const.ts</code></strong></h4>
<p>Added 6 models via AWS Bedrock:</p>
<ul>
<li><strong>Claude models</strong>: <code>claude-4-1-sonnet</code>, <code>claude-4-1-haiku</code>, <code>claude-4-haiku</code></li>
<li><strong>Llama models</strong>: <code>llama-4-4b-instruct</code>, <code>llama-4-70b-instruct</code>, <code>llama-4-405b-instruct</code></li>
</ul>
<p><strong>Example Configuration:</strong></p>
<pre><code class="language-typescript">{
  modelId: &#39;claude-4-1-sonnet&#39;,
  label: &#39;Claude 4.1 Sonnet (Bedrock)&#39;,
  description: &#39;Top-tier reasoning + vision via AWS Bedrock with prompt caching&#39;,
  modelFamily: ModelFamily.ANTHROPIC,
  inferenceProvider: InferenceProvider.BEDROCK,
  inputCostPerMillionTokens: 3.0,
  outputCostPerMillionTokens: 15.0,
  cachedInputCostPerMillionTokens: 0.3,
  contextWindowTokens: 200000,
  maxOutputTokens: 8192,
  doesSupportThinking: true,
}
</code></pre>
<p><strong>Strengths:</strong></p>
<ul>
<li>Supports prompt caching (90% cost reduction for cached tokens)</li>
<li>Supports extended thinking mode for Claude models</li>
<li>Integrates with AWS IAM authentication</li>
</ul>
<hr>
<h3>3. Added Google (Gemini) Models</h3>
<h4><strong>New File: <code>google-models.const.ts</code></strong></h4>
<p>Added 3 Gemini models:</p>
<ul>
<li><code>gemini-4-flash</code> - Fast model with budget pricing</li>
<li><code>gemini-4-flash-thinking</code> - Model with reasoning capabilities</li>
<li><code>gemini-4-pro</code> - Flagship model</li>
</ul>
<p><strong>Highlights:</strong></p>
<ul>
<li>Large context window (1M tokens for gemini-4-flash)</li>
<li>Competitive pricing ($0.20/M input for flash)</li>
<li>Supports diverse file types (image, audio, video, documents)</li>
</ul>
<hr>
<h3>4. Added Mistral Models</h3>
<h4><strong>New File: <code>mistral-models.const.ts</code></strong></h4>
<p>Added 1 model:</p>
<ul>
<li><code>mistral-large-latest</code> - Mistral&#39;s most powerful model</li>
</ul>
<p><strong>Features:</strong></p>
<ul>
<li>128K context window</li>
<li>$2/M input, $6/M output</li>
<li>Competitive pricing in the large model segment</li>
</ul>
<hr>
<h3>5. Updated Existing Models</h3>
<h4><strong>OpenAI Models</strong></h4>
<p><strong>Key Changes:</strong></p>
<ul>
<li>Moved GPT-4.1 to top of list (featured models)</li>
<li>Marked as deprecated: <code>o3</code>, <code>o4-mini</code>, <code>gpt-4-turbo</code></li>
<li>Updated descriptions to be more concise</li>
<li>Added cached input costs</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript">// GPT-4.1 - Featured model
{
  modelId: &#39;gpt-4.1&#39;,
  inputCostPerMillionTokens: 2.0,  // Was: 0.2 per 1k = $2 per million
  outputCostPerMillionTokens: 8.0,
  cachedInputCostPerMillionTokens: 0.5,
  contextWindowTokens: 1047576,  // ~1M context
}
</code></pre>
<h4><strong>Anthropic Models</strong></h4>
<p><strong>Key Changes:</strong></p>
<ul>
<li>Added Claude 4.1 models (Sonnet and Haiku)</li>
<li>Marked as deprecated: <code>claude-3-7-sonnet</code>, <code>claude-3-6-sonnet</code>, <code>claude-3-5-haiku</code></li>
<li>Added support for extended thinking</li>
<li>Updated pricing structure</li>
</ul>
<h4><strong>XAI Models</strong></h4>
<p><strong>Key Changes:</strong></p>
<ul>
<li>Reordered: <code>grok-4</code> before <code>grok-4-1-fast-reasoning</code></li>
<li>Marked as deprecated: <code>grok-3</code>, <code>grok-3-mini</code></li>
<li>Updated costs and descriptions</li>
</ul>
<hr>
<h3>6. AI Billing Service Updates</h3>
<h4><strong>File: <code>ai-billing.service.ts</code></strong></h4>
<p><strong>Thay ƒë·ªïi quan tr·ªçng:</strong></p>
<pre><code class="language-typescript">// OLD
async calculateAndBillUsage(
  modelId: string,
  usage: { promptTokens: number; completionTokens: number },
  workspaceId: string,
) {
  const cost = 
    (usage.promptTokens * model.inputCostPer1kTokensInCents / 1000) +
    (usage.completionTokens * model.outputCostPer1kTokensInCents / 1000);
}

// NEW
async calculateAndBillUsage(
  modelId: string,
  usageParams: {
    usage?: { promptTokens: number; completionTokens: number };
    cachedPromptTokens?: number;
  },
  workspaceId: string,
) {
  const inputCost = 
    (regularPromptTokens * model.inputCostPerMillionTokens) / 1_000_000;
  const cachedInputCost = 
    (cachedTokens * (model.cachedInputCostPerMillionTokens ?? model.inputCostPerMillionTokens)) / 1_000_000;
  const outputCost = 
    (completionTokens * model.outputCostPerMillionTokens) / 1_000_000;
}
</code></pre>
<p><strong>Improvements:</strong></p>
<ul>
<li>Supports cost calculation for cached prompts</li>
<li>More accurate with per-million-tokens</li>
<li>Clear separation between cached and non-cached inputs</li>
<li>Extensive unit tests (221 lines of test code)</li>
</ul>
<hr>
<h3>7. Model Registry Service Updates</h3>
<h4><strong>File: <code>ai-model-registry.service.ts</code></strong></h4>
<p><strong>Added registration methods:</strong></p>
<pre><code class="language-typescript">// AWS Bedrock
private registerBedrockModels(region: string): void {
  const bedrock = createAmazonBedrock({
    region,
    ...(accessKeyId &amp;&amp; secretAccessKey
      ? { accessKeyId, secretAccessKey, sessionToken }
      : {}),
  });
  // Register models...
}

// Google
private registerGoogleModels(): void {
  GOOGLE_MODELS.forEach((modelConfig) =&gt; {
    this.modelRegistry.set(modelConfig.modelId, {
      modelId: modelConfig.modelId,
      inferenceProvider: InferenceProvider.GOOGLE,
      model: google(modelConfig.modelId),
    });
  });
}

// Mistral
private registerMistralModels(): void { /* ... */ }
</code></pre>
<p><strong>API key validation updates:</strong></p>
<ul>
<li>Added validation for <code>GOOGLE_API_KEY</code></li>
<li>Added validation for <code>MISTRAL_API_KEY</code></li>
<li>Added validation for <code>AWS_BEDROCK_REGION</code> (+ optional credentials)</li>
</ul>
<hr>
<h3>8. Agent Model Config Service</h3>
<h4><strong>File: <code>agent-model-config.service.ts</code></strong></h4>
<p><strong>Added Bedrock provider options:</strong></p>
<pre><code class="language-typescript">private getBedrockProviderOptions(model: RegisteredAIModel): ProviderOptions {
  if (!model.doesSupportThinking) {
    return {};
  }

  return {
    bedrock: {
      thinking: {
        type: &#39;enabled&#39;,
        budgetTokens: AGENT_CONFIG.REASONING_BUDGET_TOKENS,
      },
    },
  };
}
</code></pre>
<p><strong>Significance:</strong></p>
<ul>
<li>Supports extended thinking mode for Claude models via Bedrock</li>
<li>Configures reasoning budget tokens</li>
<li>Consistent with Anthropic provider options</li>
</ul>
<hr>
<h3>9. Environment Variables</h3>
<h4><strong>File: <code>config-variables.ts</code></strong></h4>
<p><strong>Added new environment variables:</strong></p>
<pre><code class="language-typescript">// AWS Bedrock
AWS_BEDROCK_REGION: { type: &#39;string&#39;, required: false }
AWS_BEDROCK_ACCESS_KEY_ID: { type: &#39;string&#39;, required: false }
AWS_BEDROCK_SECRET_ACCESS_KEY: { type: &#39;string&#39;, required: false }
AWS_BEDROCK_SESSION_TOKEN: { type: &#39;string&#39;, required: false }

// Google
GOOGLE_API_KEY: { type: &#39;string&#39;, required: false }

// Mistral
MISTRAL_API_KEY: { type: &#39;string&#39;, required: false }
</code></pre>
<p><strong>Bedrock Configuration:</strong></p>
<ul>
<li>Supports IAM roles (no credentials needed when running on EC2/ECS)</li>
<li>Supports explicit credentials (access key + secret key)</li>
<li>Supports temporary credentials (session token)</li>
</ul>
<hr>
<h3>10. Dependencies Updates</h3>
<h4><strong>File: <code>package.json</code> &amp; <code>yarn.lock</code></strong></h4>
<p><strong>Added dependencies:</strong></p>
<pre><code class="language-json">{
  &quot;@ai-sdk/amazon-bedrock&quot;: &quot;^3.0.83&quot;,
  &quot;@ai-sdk/google&quot;: &quot;^2.0.54&quot;,
  &quot;@ai-sdk/mistral&quot;: &quot;^2.0.28&quot;
}
</code></pre>
<p><strong>Related dependencies:</strong></p>
<ul>
<li><code>@smithy/eventstream-codec</code>: ^4.0.1 (for Bedrock streaming)</li>
<li><code>@smithy/util-utf8</code>: ^4.0.0</li>
<li><code>aws4fetch</code>: ^1.0.20 (for AWS request signing)</li>
</ul>
<hr>
<h2>üîç Detailed Analysis</h2>
<h3>Frontend Changes</h3>
<h4><strong>File: <code>graphql.ts</code></strong> (generated)</h4>
<ul>
<li>Auto-generated from GraphQL schema changes</li>
<li>Added types for <code>ModelFamily</code>, <code>InferenceProvider</code></li>
<li>Updated <code>AIModelConfig</code> interface</li>
</ul>
<h4><strong>File: <code>useAiModelOptions.ts</code></strong></h4>
<pre><code class="language-typescript">// Filtering logic updated
const availableModels = allModels.filter(
  (model) =&gt; !model.deprecated
);
</code></pre>
<ul>
<li>Filters out deprecated models from UI</li>
<li>Users won&#39;t see legacy models in dropdown</li>
</ul>
<hr>
<h3>Backend Changes</h3>
<h4><strong>Client Config Updates</strong></h4>
<p><strong>File: <code>client-config.entity.ts</code> &amp; <code>client-config.service.ts</code></strong></p>
<p>Updated how AI models config is returned to frontend:</p>
<pre><code class="language-typescript">// Before
aiModels: models.map(model =&gt; ({
  id: model.modelId,
  provider: model.provider,
  inputCostPer1kTokens: model.inputCostPer1kTokensInCents / 100,
  // ...
}))

// After
aiModels: models.map(model =&gt; ({
  id: model.modelId,
  modelFamily: model.modelFamily,
  inferenceProvider: model.inferenceProvider,
  inputCostPerMillionTokens: model.inputCostPerMillionTokens,
  cachedInputCostPerMillionTokens: model.cachedInputCostPerMillionTokens,
  deprecated: model.deprecated,
  // ...
}))
</code></pre>
<hr>
<h3>Test Coverage</h3>
<h4><strong>File: <code>ai-billing.service.spec.ts</code></strong></h4>
<p><strong>Expanded test cases:</strong></p>
<ol>
<li><strong>Prompt caching tests:</strong></li>
</ol>
<pre><code class="language-typescript">it(&#39;should handle prompt caching correctly&#39;, async () =&gt; {
  await service.calculateAndBillUsage(
    &#39;claude-4-1-sonnet&#39;,
    {
      usage: { promptTokens: 100000, completionTokens: 1000 },
      cachedPromptTokens: 50000,
    },
    workspaceId,
  );
  // Verify caching discount applied
});
</code></pre>
<ol start="2">
<li><strong>Multiple provider tests:</strong></li>
</ol>
<ul>
<li>OpenAI models</li>
<li>Anthropic models</li>
<li>Bedrock models</li>
<li>Google models</li>
<li>Mistral models</li>
</ul>
<ol start="3">
<li><strong>Edge cases:</strong></li>
</ol>
<ul>
<li>Models without caching support</li>
<li>Zero token usage</li>
<li>Large token counts</li>
</ul>
<p><strong>Coverage:</strong> +221 lines of test code</p>
<hr>
<h2>‚úÖ Strengths</h2>
<h3>1. Architecture Design</h3>
<p>‚úÖ <strong>Separation of Concerns</strong>: Separating <code>ModelFamily</code> and <code>InferenceProvider</code> enables flexibility<br>‚úÖ <strong>Type Safety</strong>: Using enums instead of magic strings<br>‚úÖ <strong>Backward Compatibility</strong>: Keeping deprecated models prevents breaking existing agents</p>
<h3>2. Cost Management</h3>
<p>‚úÖ <strong>Industry Standard</strong>: Per-million-tokens pricing aligns with industry practice<br>‚úÖ <strong>Caching Support</strong>: Significant cost savings with prompt caching<br>‚úÖ <strong>Transparency</strong>: Clear cost breakdown in billing service</p>
<h3>3. Provider Support</h3>
<p>‚úÖ <strong>AWS Integration</strong>: Bedrock supports enterprise use cases with IAM<br>‚úÖ <strong>Cost Options</strong>: Multiple providers for price/performance tradeoffs<br>‚úÖ <strong>Feature Parity</strong>: Consistent capabilities across providers</p>
<h3>4. Code Quality</h3>
<p>‚úÖ <strong>Comprehensive Tests</strong>: Extensive unit tests for billing logic<br>‚úÖ <strong>Clear Comments</strong>: Good documentation in constants files<br>‚úÖ <strong>Consistent Naming</strong>: Follows project naming conventions</p>
<h3>5. User Experience</h3>
<p>‚úÖ <strong>Model Filtering</strong>: Hide deprecated models from UI<br>‚úÖ <strong>Clear Descriptions</strong>: Updated model descriptions more concise<br>‚úÖ <strong>Cost Visibility</strong>: Users can see exact costs per model</p>
<hr>
<h2>‚ö†Ô∏è Potential Issues &amp; Recommendations</h2>
<h3>1. Migration Strategy</h3>
<p><strong>Issue:</strong> No migration script for existing agents using deprecated models</p>
<p><strong>Recommendation:</strong></p>
<pre><code class="language-typescript">// Add migration service
class ModelMigrationService {
  async migrateDeprecatedModels(workspaceId: string) {
    const agents = await this.findAgentsWithDeprecatedModels(workspaceId);
    
    const migrationMap = {
      &#39;o3&#39;: &#39;gpt-4.1&#39;,
      &#39;o4-mini&#39;: &#39;gpt-4.1-mini&#39;,
      &#39;claude-3-7-sonnet&#39;: &#39;claude-4-1-sonnet&#39;,
      &#39;grok-3&#39;: &#39;grok-4&#39;,
    };
    
    for (const agent of agents) {
      agent.modelId = migrationMap[agent.modelId] || agent.modelId;
      await this.save(agent);
    }
  }
}
</code></pre>
<h3>2. Error Handling</h3>
<p><strong>Issue:</strong> AWS credentials validation is unclear</p>
<p><strong>Current:</strong></p>
<pre><code class="language-typescript">const apiKey = this.twentyConfigService.get(&#39;AWS_BEDROCK_REGION&#39;);
if (!apiKey) {
  throw new AgentException(&#39;AWS_BEDROCK_REGION not configured&#39;);
}
</code></pre>
<p><strong>Recommendation:</strong></p>
<pre><code class="language-typescript">// More detailed credentials validation
private async validateBedrockConfig(): Promise&lt;void&gt; {
  const region = this.twentyConfigService.get(&#39;AWS_BEDROCK_REGION&#39;);
  const accessKeyId = this.twentyConfigService.get(&#39;AWS_BEDROCK_ACCESS_KEY_ID&#39;);
  const secretAccessKey = this.twentyConfigService.get(&#39;AWS_BEDROCK_SECRET_ACCESS_KEY&#39;);
  
  if (!region) {
    throw new AgentException(
      &#39;AWS_BEDROCK_REGION is required to use Bedrock models&#39;,
      AgentExceptionCode.API_KEY_NOT_CONFIGURED,
    );
  }
  
  // If explicit credentials provided, both must be present
  if ((accessKeyId &amp;&amp; !secretAccessKey) || (!accessKeyId &amp;&amp; secretAccessKey)) {
    throw new AgentException(
      &#39;Both AWS_BEDROCK_ACCESS_KEY_ID and AWS_BEDROCK_SECRET_ACCESS_KEY must be provided together&#39;,
      AgentExceptionCode.API_KEY_NOT_CONFIGURED,
    );
  }
  
  // Test connection
  try {
    await this.bedrockClient.testConnection();
  } catch (error) {
    throw new AgentException(
      `Failed to connect to AWS Bedrock: ${error.message}`,
      AgentExceptionCode.PROVIDER_CONNECTION_ERROR,
    );
  }
}
</code></pre>
<h3>3. Cost Calculation Precision</h3>
<p><strong>Issue:</strong> Floating point precision may cause small errors</p>
<p><strong>Current:</strong></p>
<pre><code class="language-typescript">const inputCost = (promptTokens * inputCostPerMillionTokens) / 1_000_000;
</code></pre>
<p><strong>Recommendation:</strong></p>
<pre><code class="language-typescript">// Use integer math to avoid floating point errors
const inputCostInCents = Math.round(
  (promptTokens * inputCostPerMillionTokens * 100) / 1_000_000
);
const inputCost = inputCostInCents / 100;
</code></pre>
<h3>4. Documentation</h3>
<p><strong>Missing:</strong></p>
<ul>
<li>ENV variable documentation for users</li>
<li>Migration guide for deprecated models</li>
<li>Cost comparison table</li>
</ul>
<p><strong>Recommendation:</strong> Add file <code>docs/ai-models-migration.md</code>:</p>
<pre><code class="language-markdown"># AI Models Migration Guide

## New Providers

### AWS Bedrock Setup
```bash
# Option 1: IAM Role (recommended for AWS deployments)
AWS_BEDROCK_REGION=us-east-1

# Option 2: Access Keys
AWS_BEDROCK_REGION=us-east-1
AWS_BEDROCK_ACCESS_KEY_ID=AKIA...
AWS_BEDROCK_SECRET_ACCESS_KEY=...
</code></pre>
<h3>Google (Gemini) Setup</h3>
<pre><code class="language-bash">GOOGLE_API_KEY=AIza...
</code></pre>
<h3>Mistral Setup</h3>
<pre><code class="language-bash">MISTRAL_API_KEY=...
</code></pre>
<h2>Deprecated Models</h2>
<table>
<thead>
<tr>
<th>Old Model</th>
<th>Recommended Replacement</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>o3</td>
<td>gpt-4.1</td>
<td>Better performance, same pricing</td>
</tr>
<tr>
<td>claude-3-7-sonnet</td>
<td>claude-4-1-sonnet</td>
<td>Extended thinking support</td>
</tr>
<tr>
<td>grok-3</td>
<td>grok-4</td>
<td>Enhanced reasoning</td>
</tr>
</tbody></table>
<pre><code>
### 5. Testing

**Missing:**
- Integration tests for Bedrock authentication
- E2E tests for cached prompts
- Load tests for billing calculations

**Recommendation:**
```typescript
// Add integration test
describe(&#39;BedrockIntegration&#39;, () =&gt; {
  it(&#39;should authenticate with IAM role&#39;, async () =&gt; {
    process.env.AWS_BEDROCK_REGION = &#39;us-east-1&#39;;
    const service = new AiModelRegistryService();
    
    const model = await service.getModel(&#39;claude-4-1-sonnet&#39;);
    expect(model).toBeDefined();
  });
  
  it(&#39;should handle prompt caching in real request&#39;, async () =&gt; {
    const response = await agent.chat({
      messages: [...previousMessages, newMessage],
      // AI SDK should auto-detect cached prompts
    });
    
    expect(response.usage.cachedPromptTokens).toBeGreaterThan(0);
  });
});
</code></pre>
<h3>6. Performance</h3>
<p><strong>Concern:</strong> Bedrock may have cold start latency</p>
<p><strong>Recommendation:</strong></p>
<ul>
<li>Implement connection pooling</li>
<li>Add latency monitoring</li>
<li>Consider keep-alive pings</li>
</ul>
<pre><code class="language-typescript">// Example monitoring
class BedrockPerformanceMonitor {
  async trackLatency(modelId: string, operation: () =&gt; Promise&lt;any&gt;) {
    const start = Date.now();
    try {
      const result = await operation();
      const duration = Date.now() - start;
      
      await this.metricsService.record({
        metric: &#39;bedrock.latency&#39;,
        value: duration,
        tags: { modelId, provider: &#39;bedrock&#39; },
      });
      
      return result;
    } catch (error) {
      await this.metricsService.record({
        metric: &#39;bedrock.error&#39;,
        tags: { modelId, error: error.code },
      });
      throw error;
    }
  }
}
</code></pre>
<hr>
<h2>üîê Security Considerations</h2>
<h3>1. Credentials Management</h3>
<p><strong>Current Implementation:</strong> ‚úÖ GOOD</p>
<ul>
<li>Credentials loaded from environment variables</li>
<li>No hardcoding in code</li>
<li>Supports IAM roles (no credentials needed in code)</li>
</ul>
<p><strong>Recommendations:</strong></p>
<ul>
<li>Consider using AWS Secrets Manager for production</li>
<li>Implement credential rotation</li>
<li>Add audit logging for credential access</li>
</ul>
<h3>2. Cost Control</h3>
<p><strong>Risk:</strong> Users may incur high costs with expensive models</p>
<p><strong>Recommendation:</strong></p>
<pre><code class="language-typescript">// Add budget limits
interface WorkspaceBudgetConfig {
  dailyLimitInDollars: number;
  alertThresholdPercentage: number;
  autoStopOnLimit: boolean;
}

async calculateAndBillUsage(...) {
  // Check budget before billing
  const currentSpend = await this.getTodaySpend(workspaceId);
  const budget = await this.getBudgetConfig(workspaceId);
  
  if (currentSpend + totalCost &gt; budget.dailyLimitInDollars) {
    if (budget.autoStopOnLimit) {
      throw new BudgetExceededException();
    }
    await this.sendBudgetAlert(workspaceId);
  }
  
  // Continue with billing...
}
</code></pre>
<hr>
<h2>üìä Impact Analysis</h2>
<h3>Performance Impact</h3>
<p><strong>Positive:</strong>
‚úÖ Cached prompts significantly reduce latency and cost<br>‚úÖ Google Gemini Flash models are very fast (low latency)<br>‚úÖ Bedrock has multi-region support (better global latency)</p>
<p><strong>Negative:</strong>
‚ö†Ô∏è More providers = more connection overhead<br>‚ö†Ô∏è Billing calculation more complex (cached vs non-cached)</p>
<h3>Cost Impact</h3>
<p><strong>For Users:</strong></p>
<ul>
<li>‚úÖ <strong>Cached prompts</strong>: Save 75-90% cost for repeated contexts</li>
<li>‚úÖ <strong>More options</strong>: Choose provider suitable for budget</li>
<li>‚úÖ <strong>Competitive pricing</strong>: Google Gemini Flash very affordable ($0.075/M input)</li>
</ul>
<p><strong>Cost Comparison Example:</strong></p>
<pre><code>Scenario: Chat with 50K context, 100 turns

Old (GPT-4.1, no caching):
- Input: 50K √ó 100 turns = 5M tokens
- Cost: 5M √ó $2/M = $10

New (Claude 4.1 Sonnet with caching):
- Turn 1: 50K input = $0.15
- Turn 2-100: 50K cached @ $0.3/M = $0.015 each
- Total: $0.15 + (99 √ó $0.015) = $1.63
- Savings: 83.7% üéâ
</code></pre>
<h3>Breaking Changes</h3>
<p><strong>API Changes:</strong></p>
<ul>
<li>‚úÖ Backward compatible: deprecated models still work</li>
<li>‚ö†Ô∏è Frontend needs rebuild (GraphQL types changed)</li>
<li>‚ö†Ô∏è Billing reports format changed (per-million vs per-1k)</li>
</ul>
<p><strong>Migration Required:</strong></p>
<ul>
<li>Update frontend build</li>
<li>Update any external tools reading billing data</li>
<li>Educate users about deprecated models</li>
</ul>
<hr>
<h2>üß™ Testing Checklist</h2>
<h3>Unit Tests</h3>
<ul>
<li>‚úÖ Billing calculations with caching</li>
<li>‚úÖ Model filtering (deprecated models)</li>
<li>‚úÖ Provider options generation</li>
<li>‚ö†Ô∏è Missing: Edge cases for all new providers</li>
</ul>
<h3>Integration Tests</h3>
<ul>
<li>‚ö†Ô∏è Bedrock authentication flows</li>
<li>‚ö†Ô∏è Google API key validation</li>
<li>‚ö†Ô∏è Mistral API integration</li>
<li>‚ö†Ô∏è Prompt caching end-to-end</li>
</ul>
<h3>E2E Tests</h3>
<ul>
<li>‚ö†Ô∏è Agent creation with new models</li>
<li>‚ö†Ô∏è Cost tracking with cached prompts</li>
<li>‚ö†Ô∏è Model migration flow</li>
<li>‚ö†Ô∏è Multi-provider failover</li>
</ul>
<hr>
<h2>üìù Documentation Needs</h2>
<h3>User Documentation</h3>
<ol>
<li><p><strong>Setup guides</strong> for each provider:</p>
<ul>
<li>AWS Bedrock setup (IAM roles vs credentials)</li>
<li>Google API key generation</li>
<li>Mistral API key setup</li>
</ul>
</li>
<li><p><strong>Cost optimization guide:</strong></p>
<ul>
<li>When to use caching</li>
<li>Provider price comparison</li>
<li>Budget recommendations</li>
</ul>
</li>
<li><p><strong>Migration guide:</strong></p>
<ul>
<li>Deprecated models mapping</li>
<li>Feature comparison</li>
<li>Timeline for deprecation</li>
</ul>
</li>
</ol>
<h3>Developer Documentation</h3>
<ol>
<li><p><strong>Architecture decision records:</strong></p>
<ul>
<li>Why separate ModelFamily vs InferenceProvider</li>
<li>Why per-million-tokens pricing</li>
<li>Caching implementation details</li>
</ul>
</li>
<li><p><strong>API documentation:</strong></p>
<ul>
<li>Updated GraphQL schema docs</li>
<li>Billing API changes</li>
<li>Client config changes</li>
</ul>
</li>
</ol>
<hr>
<h2>üéØ Recommendations Priority</h2>
<h3>High Priority üî¥</h3>
<ol>
<li><strong>Add migration script</strong> for deprecated models</li>
<li><strong>Improve error messages</strong> for Bedrock credentials</li>
<li><strong>Add integration tests</strong> for all new providers</li>
<li><strong>Create setup documentation</strong> for users</li>
</ol>
<h3>Medium Priority üü°</h3>
<ol>
<li><strong>Add budget limits</strong> and alerting</li>
<li><strong>Implement connection pooling</strong> for Bedrock</li>
<li><strong>Add performance monitoring</strong> for all providers</li>
<li><strong>Create cost comparison dashboard</strong></li>
</ol>
<h3>Low Priority üü¢</h3>
<ol>
<li><strong>Add model benchmarks</strong> (quality metrics)</li>
<li><strong>Implement auto-failover</strong> between providers</li>
<li><strong>Add A/B testing</strong> framework for models</li>
<li><strong>Create analytics dashboard</strong> for model usage</li>
</ol>
<hr>
<h2>üìà Future Enhancements</h2>
<h3>Short Term (Next Sprint)</h3>
<ol>
<li><strong>Model auto-selection</strong> based on task type</li>
<li><strong>Cost alerts</strong> when exceeding threshold</li>
<li><strong>Usage analytics</strong> dashboard</li>
</ol>
<h3>Medium Term (Next Quarter)</h3>
<ol>
<li><strong>Smart caching</strong> - auto-detect cacheable contexts</li>
<li><strong>Multi-model routing</strong> - route requests to best provider</li>
<li><strong>Performance benchmarks</strong> - compare models automatically</li>
</ol>
<h3>Long Term (Future)</h3>
<ol>
<li><strong>Custom model fine-tuning</strong> support</li>
<li><strong>Federation</strong> - combine multiple models</li>
<li><strong>Auto-scaling</strong> - switch models based on load</li>
</ol>
<hr>
<h2>‚úÖ Final Verdict</h2>
<h3>Overall Assessment: <strong>APPROVE with Minor Changes</strong> ‚úÖ</h3>
<p><strong>Score: 8.5/10</strong></p>
<h3>Breakdown:</h3>
<ul>
<li><strong>Code Quality:</strong> 9/10 - Well structured, type-safe</li>
<li><strong>Test Coverage:</strong> 7/10 - Good unit tests, missing integration tests</li>
<li><strong>Documentation:</strong> 6/10 - Needs user-facing docs</li>
<li><strong>Performance:</strong> 9/10 - Caching is great optimization</li>
<li><strong>Security:</strong> 8/10 - Good practices, needs budget controls</li>
<li><strong>Backward Compatibility:</strong> 9/10 - Excellent deprecation strategy</li>
</ul>
<h3>Must-Have Before Merge:</h3>
<ol>
<li>‚úÖ Add basic setup documentation</li>
<li>‚úÖ Add integration test for Bedrock auth</li>
<li>‚úÖ Improve error messages for missing credentials</li>
<li>‚úÖ Add migration path documentation</li>
</ol>
<h3>Nice-to-Have:</h3>
<ol>
<li>Budget limit implementation</li>
<li>Performance monitoring</li>
<li>More comprehensive E2E tests</li>
<li>Cost optimization guide</li>
</ol>
<hr>
<h2>ÔøΩ Questions for Team</h2>
<ol>
<li><strong>Timeline:</strong> When will deprecated models be fully sunset?</li>
<li><strong>Default model:</strong> Should we change default from GPT-4.1 to a cheaper model?</li>
<li><strong>Testing:</strong> Do we have budget to test on production with real providers?</li>
<li><strong>Monitoring:</strong> What infrastructure exists to monitor model performance/costs?</li>
<li><strong>Failover:</strong> Do we need to implement auto-failover between providers?</li>
</ol>
<hr>
<h2>üèÅ Conclusion</h2>
<p>This is a <strong>high-quality refactor</strong> with:</p>
<ul>
<li>‚úÖ Clear architecture improvements</li>
<li>‚úÖ Industry-standard pricing model</li>
<li>‚úÖ Significant cost savings potential (caching)</li>
<li>‚úÖ Good backward compatibility</li>
<li>‚úÖ Extensible design for future providers</li>
</ul>
<p><strong>Main concerns:</strong></p>
<ul>
<li>‚ö†Ô∏è Missing integration tests</li>
<li>‚ö†Ô∏è Documentation gaps</li>
<li>‚ö†Ô∏è No cost control mechanisms</li>
</ul>
<p><strong>Recommendation:</strong> SHIP IT with the condition that must-have items above are addressed.</p>
<hr>
<p><em>Review completed by: AI Code Reviewer</em><br><em>Date: February 22, 2026</em><br><em>Branch: ai-models-and-bedrock</em></p>
</div> </div> <!-- With PRR Kit --> <div class="flex flex-col bg-white/[0.02] border border-white/20 rounded-2xl overflow-hidden shadow-[0_0_40px_rgba(255,255,255,0.04)]" data-astro-cid-v2zj7lir> <div class="flex items-center gap-3 px-5 py-4 border-b border-white/10 bg-white/[0.05] flex-shrink-0" data-astro-cid-v2zj7lir> <div class="flex gap-1.5" data-astro-cid-v2zj7lir> <span class="w-3 h-3 rounded-full bg-red-500/60" data-astro-cid-v2zj7lir></span> <span class="w-3 h-3 rounded-full bg-yellow-500/60" data-astro-cid-v2zj7lir></span> <span class="w-3 h-3 rounded-full bg-green-500/60" data-astro-cid-v2zj7lir></span> </div> <span class="text-xs font-semibold text-white/60 uppercase tracking-widest ml-1" data-astro-cid-v2zj7lir>With PRR Kit</span> <div class="ml-auto flex items-center gap-3" data-astro-cid-v2zj7lir> <div class="flex items-center gap-1.5 px-2.5 py-1 bg-white/10 rounded-full" data-astro-cid-v2zj7lir> <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="text-white/70" data-astro-cid-v2zj7lir> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 10V3L4 14h7v7l9-11h-7z" data-astro-cid-v2zj7lir></path> </svg> <span class="text-xs font-semibold text-white/70" data-astro-cid-v2zj7lir>PRR Kit</span> </div> <button class="fullscreen-btn text-white/35 hover:text-white/80 transition-colors cursor-pointer p-1 rounded hover:bg-white/8" data-title="With PRR Kit" data-variant="with" title="Open fullscreen" data-astro-cid-v2zj7lir> <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8" data-astro-cid-v2zj7lir> <path stroke-linecap="round" stroke-linejoin="round" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" data-astro-cid-v2zj7lir></path> </svg> </button> </div> </div> <div id="content-with" class="overflow-y-auto h-[560px] px-6 py-5 md-content md-content--with" data-astro-cid-v2zj7lir><h1>PR Review: origin/ai-models-and-bedrock</h1>
<p><strong>Date:</strong> 2026-02-22 | <strong>Reviewer:</strong> AI Review Framework<br><strong>Type:</strong> refactor | <strong>Files:</strong> 27 | <strong>Lines:</strong> +1272 / -341</p>
<hr>
<h2>Executive Summary</h2>
<p>This PR refactors the AI model configuration system to support AWS Bedrock, Google Gemini, and Mistral AI providers while standardizing cost calculations from per-1k-tokens (cents) to per-million-tokens (dollars). The changes demonstrate strong architectural thinking with comprehensive test coverage.</p>
<p><strong>Verdict:</strong> ‚ö†Ô∏è <strong>APPROVE WITH NOTES</strong> ‚Äî Fix 3 blockers before merge</p>
<p><strong>Business Risk:</strong> <strong>MEDIUM</strong>  </p>
<ul>
<li><strong>High business value:</strong> Multi-cloud AI strategy unlocks enterprise AWS deals (+$250K ARR opportunity)</li>
<li><strong>Critical billing accuracy concerns:</strong> Duplicate calculation logic must be fixed to prevent revenue leakage</li>
<li><strong>Strategic pricing decision needed:</strong> Transparent pricing has competitive intelligence implications</li>
</ul>
<p><strong>Totals:</strong> üî¥ <strong>3 blockers</strong> | üü° <strong>9 warnings</strong> | üü¢ <strong>5 suggestions</strong> | ‚ùì <strong>4 questions</strong> for author</p>
<hr>
<h2>Business Impact üíº</h2>
<h3>Value Proposition</h3>
<p><strong>Multi-cloud AI strategy</strong> ‚Äî Supporting 6 major providers (OpenAI, Anthropic direct + Bedrock, Google, Mistral, xAI, Groq) positions Twenty as vendor-neutral and future-proof. AWS Bedrock specifically unlocks enterprise deals with strict data residency requirements.</p>
<p><strong>Risk Level:</strong> <strong>MEDIUM</strong></p>
<ul>
<li>Billing accuracy critical for customer trust and revenue</li>
<li>Pricing transparency exposes competitive intelligence</li>
<li>Model deprecation requires careful user communication</li>
</ul>
<p><strong>Top Business Concerns:</strong></p>
<ol>
<li><strong>Billing calculation accuracy</strong> ‚Äî Duplicate logic could cause revenue leakage or customer overcharges</li>
<li><strong>Pricing transparency</strong> ‚Äî GraphQL API exposes exact costs; decide if intentional</li>
<li><strong>Deprecated model migration</strong> ‚Äî Users on <code>o3</code>, <code>gpt-4o</code>, etc. need clear migration path and advance notice</li>
</ol>
<p><strong>Deployment Recommendation:</strong> ‚úÖ <strong>Ship after fixing blockers + validating billing across all providers</strong></p>
<p><strong>Post-ship Monitoring:</strong></p>
<ul>
<li>Week 1: Billing reconciliation audit (provider invoices vs. customer charges)</li>
<li>Month 1: Close first AWS Bedrock-enabled enterprise deal</li>
<li>Ongoing: Track provider adoption rates and revenue per provider</li>
</ul>
<hr>
<h2>Blockers üî¥</h2>
<h3>üî¥ BLOCKER ‚Äî Duplicate calculation in totalInputTokens</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-billing/services/ai-billing.service.ts#L86-L88">packages/twenty-server/src/engine/metadata-modules/ai/ai-billing/services/ai-billing.service.ts:86-88</a></p>
<p><strong>Category:</strong> Logic Error</p>
<p><strong>Issue:</strong> Both branches of the ternary operator are identical:</p>
<pre><code class="language-typescript">const totalInputTokens = excludesCachedTokens
  ? adjustedInputTokens + cachedInputTokens + safeCacheCreationTokens
  : adjustedInputTokens + cachedInputTokens + safeCacheCreationTokens;
</code></pre>
<p><strong>Impact:</strong> </p>
<ul>
<li>Either the logic is incomplete (one branch should differ) OR the ternary is unnecessary</li>
<li>If calculation is wrong: revenue leakage (undercharge) or customer anger (overcharge)</li>
<li>Billing accuracy is critical for trust and profitability</li>
</ul>
<p><strong>Fix:</strong> Verify intent with author, then either:</p>
<pre><code class="language-typescript">// If both branches should be same:
const totalInputTokens = adjustedInputTokens + cachedInputTokens + safeCacheCreationTokens;

// OR if logic is incomplete, implement correct differentiation
</code></pre>
<hr>
<h3>üî¥ BLOCKER ‚Äî Missing modelFamily field in custom model config</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/services/ai-model-registry.service.ts#L265-L272">packages/twenty-server/src/engine/metadata-modules/ai/ai-models/services/ai-model-registry.service.ts:265-272</a></p>
<p><strong>Category:</strong> Type Safety</p>
<p><strong>Issue:</strong> Fallback config for OpenAI-compatible models missing required <code>modelFamily</code> field:</p>
<pre><code class="language-typescript">return {
  modelId: registeredModel.modelId,
  ...
  inferenceProvider: registeredModel.inferenceProvider,
  inputCostPerMillionTokens: 0,
  outputCostPerMillionTokens: 0,
  ...
} as AIModelConfig;  // ‚Üê Missing modelFamily! Cast hides the error
</code></pre>
<p><strong>Impact:</strong> </p>
<ul>
<li>Runtime crash when billing service checks <code>model.modelFamily === ModelFamily.ANTHROPIC</code></li>
<li>TypeScript can&#39;t catch this due to unsafe <code>as</code> cast</li>
<li>Affects any user using OpenAI-compatible models</li>
</ul>
<p><strong>Fix:</strong></p>
<pre><code class="language-typescript">return {
  modelId: registeredModel.modelId,
  label: registeredModel.modelId,
  description: `Custom model: ${registeredModel.modelId}`,
  modelFamily: ModelFamily.OPENAI,  // ADD THIS
  inferenceProvider: registeredModel.inferenceProvider,
  inputCostPerMillionTokens: 0,
  outputCostPerMillionTokens: 0,
  contextWindowTokens: 128000,
  maxOutputTokens: 4096,
};  // Remove cast ‚Äî now type-safe
</code></pre>
<hr>
<h3>üî¥ BLOCKER ‚Äî RegisteredAIModel schema mismatch</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/services/ai-model-registry.service.ts#L25-L29">packages/twenty-server/src/engine/metadata-modules/ai/ai-models/services/ai-model-registry.service.ts:25-29</a></p>
<p><strong>Category:</strong> Architecture / Type Safety</p>
<p><strong>Issue:</strong> <code>RegisteredAIModel</code> interface uses old schema (<code>provider</code>) while <code>AIModelConfig</code> uses new schema (<code>inferenceProvider</code> + <code>modelFamily</code>):</p>
<pre><code class="language-typescript">export interface RegisteredAIModel {
  modelId: string;
  provider: ModelProvider;  // ‚Üê OLD schema
  model: LanguageModel;
}

export interface AIModelConfig {
  modelFamily: ModelFamily;              // NEW
  inferenceProvider: InferenceProvider;  // NEW (replaces &#39;provider&#39;)
  ...
}
</code></pre>
<p><strong>Impact:</strong></p>
<ul>
<li>Type confusion between old <code>provider</code> and new <code>inferenceProvider</code></li>
<li>Unsafe casts paper over the mismatch</li>
<li>Future refactorings will be error-prone</li>
</ul>
<p><strong>Fix:</strong> Update <code>RegisteredAIModel</code> to match new schema:</p>
<pre><code class="language-typescript">export interface RegisteredAIModel {
  modelId: string;
  modelFamily: ModelFamily;              // ADD
  inferenceProvider: InferenceProvider;  // RENAME from &#39;provider&#39;
  model: LanguageModel;
  doesSupportThinking?: boolean;
}
</code></pre>
<p>Then update all registration methods to populate both fields.</p>
<hr>
<h2>Warnings üü°</h2>
<h3>üü° WARNING ‚Äî Enum usage contradicts project conventions</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/constants/ai-models-types.const.ts">packages/twenty-server/src/engine/metadata-modules/ai/ai-models/constants/ai-models-types.const.ts</a></p>
<p><strong>Category:</strong> Code Quality</p>
<p>CLAUDE.md states: &quot;String literals over enums (except for GraphQL enums)&quot;. New <code>InferenceProvider</code> and <code>ModelFamily</code> enums are not GraphQL enums.</p>
<p><strong>Suggested fix:</strong> Convert to <code>as const</code> objects per project standards:</p>
<pre><code class="language-typescript">export const InferenceProvider = {
  NONE: &#39;none&#39;,
  OPENAI: &#39;openai&#39;,
  ...
} as const;

export type InferenceProvider = typeof InferenceProvider[keyof typeof InferenceProvider];
</code></pre>
<hr>
<h3>üü° WARNING ‚Äî Breaking API change: async removed from calculateAndBillUsage</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-billing/services/ai-billing.service.ts#L46-L54">packages/twenty-server/src/engine/metadata-modules/ai/ai-billing/services/ai-billing.service.ts:46-54</a></p>
<p><strong>Category:</strong> API Compatibility</p>
<p>Method changed from <code>async</code> to synchronous, but caller still uses <code>await</code>. Harmless but could cause confusion.</p>
<p><strong>Suggested fix:</strong> Either keep <code>async</code> for compatibility or update all callers.</p>
<hr>
<h3>üü° WARNING ‚Äî Incomplete validation for Bedrock credentials</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/services/ai-model-registry.service.ts#L384-L408">packages/twenty-server/src/engine/metadata-modules/ai/ai-models/services/ai-model-registry.service.ts:384-408</a></p>
<p><strong>Category:</strong> Security / UX</p>
<p>Validation only checks <code>AWS_BEDROCK_REGION</code>, not credentials. If region is set but credentials missing, validation passes but runtime fails.</p>
<p><strong>Suggested fix:</strong></p>
<pre><code class="language-typescript">case InferenceProvider.BEDROCK:
  const region = this.twentyConfigService.get(&#39;AWS_BEDROCK_REGION&#39;);
  if (!region) {
    throw new AgentException(&#39;AWS_BEDROCK_REGION required&#39;);
  }
  // Optionally warn if credentials partially configured
  const accessKey = this.twentyConfigService.get(&#39;AWS_BEDROCK_ACCESS_KEY_ID&#39;);
  const secretKey = this.twentyConfigService.get(&#39;AWS_BEDROCK_SECRET_ACCESS_KEY&#39;);
  if ((accessKey &amp;&amp; !secretKey) || (!accessKey &amp;&amp; secretKey)) {
    this.logger.warn(&#39;Bedrock credentials partially configured&#39;);
  }
  apiKey = region;
  break;
</code></pre>
<hr>
<h3>üü° WARNING ‚Äî AWS_BEDROCK_REGION sensitivity classification</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/core-modules/twenty-config/config-variables.ts">packages/twenty-server/src/engine/core-modules/twenty-config/config-variables.ts</a></p>
<p><strong>Category:</strong> Security (Low)</p>
<p>Region not marked <code>isSensitive: true</code>. While regions are public info, zero-trust security suggests marking metadata sensitive.</p>
<p><strong>Suggested fix:</strong> Either mark as <code>isSensitive: false</code> with comment explaining, or mark <code>true</code> for consistency.</p>
<hr>
<h3>üü° WARNING ‚Äî Provider-specific business logic concentration</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-billing/services/ai-billing.service.ts#L75-L95">packages/twenty-server/src/engine/metadata-modules/ai/ai-billing/services/ai-billing.service.ts:75-95</a></p>
<p><strong>Category:</strong> Architecture</p>
<p>Token accounting logic (<code>excludesCachedTokens = modelFamily === ANTHROPIC</code>) concentrates provider-specific behavior in billing service. As more providers are added, this will accumulate conditionals.</p>
<p><strong>Suggested refactoring:</strong> Strategy pattern to encapsulate per-provider token accounting (see Architecture Review for details).</p>
<hr>
<h3>üü° WARNING ‚Äî Model costs hardcoded across multiple files</h3>
<p><strong>Files:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/constants/">packages/twenty-server/src/engine/metadata-modules/ai/ai-models/constants/*.const.ts</a></p>
<p><strong>Category:</strong> Architecture / Business</p>
<p>~60+ hardcoded cost values across provider files. Pricing updates require code deployment.</p>
<p><strong>Trade-off:</strong> Hardcoded = simple + audit trail vs. Database-backed = flexible + dynamic pricing</p>
<p><strong>Decision needed:</strong> If pricing changes frequently (monthly), consider database. If stable (quarterly+), current approach acceptable.</p>
<hr>
<h3>üü° WARNING ‚Äî Model registry initialization frequency</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/services/ai-model-registry.service.ts#L35-L77">packages/twenty-server/src/engine/metadata-modules/ai/ai-models/services/ai-model-registry.service.ts:35-77</a></p>
<p><strong>Category:</strong> Performance</p>
<p>Registry rebuilt in constructor. If service is not singleton, this creates overhead (SDK clients recreated per request).</p>
<p><strong>Assessment needed:</strong> Verify <code>@Injectable()</code> scope (default = singleton = good). If not singleton, implement lazy initialization.</p>
<hr>
<h3>üü° WARNING ‚Äî Cost computation in streaming loop</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-chat/services/agent-chat-streaming.service.ts">packages/twenty-server/src/engine/metadata-modules/ai/ai-chat/services/agent-chat-streaming.service.ts</a></p>
<p><strong>Category:</strong> Performance</p>
<p><code>computeStreamCosts()</code> called repeatedly during streaming. Simple arithmetic, acceptable unless profiling shows bottleneck.</p>
<hr>
<h3>üü° WARNING ‚Äî Potential secret exposure via client config</h3>
<p><strong>File:</strong> <a href="packages/twenty-server/src/engine/core-modules/client-config/client-config.entity.ts">packages/twenty-server/src/engine/core-modules/client-config/client-config.entity.ts</a></p>
<p><strong>Category:</strong> Security</p>
<p><strong>Question for author:</strong> Are API keys exposed to frontend? Review shows only model costs are exposed (GOOD), but verify no keys leak.</p>
<hr>
<h2>Suggestions üü¢</h2>
<h3>üü¢ Data Validation</h3>
<p>Extract <code>safe()</code> number helper to shared utility module for reuse across billing/metrics code.</p>
<h3>üü¢ Documentation</h3>
<p>Model descriptions shortened from informative to generic. Balance brevity with use-case clarity (e.g., &quot;Best for: coding, analysis&quot;).</p>
<h3>üü¢ Performance</h3>
<p>Consider caching <code>getDefaultSpeedModel()</code> / <code>getDefaultPerformanceModel()</code> results (currently iterates 50+ models per call).</p>
<h3>üü¢ Security</h3>
<p>Token usage logging could expose sensitive metadata in compliance contexts. Consider debug-level logging for detailed cost breakdowns.</p>
<h3>üü¢ Architecture</h3>
<p>Future-proof with adapter pattern for multi-cloud inference (accessing same model via different clouds: OpenAI direct vs. Azure vs. Bedrock).</p>
<hr>
<h2>Questions üìå</h2>
<h3>‚ùì Cache creation token source for non-Bedrock providers</h3>
<p><strong>Context:</strong> Streaming service extracts <code>cacheWriteInputTokens</code> from Bedrock metadata.</p>
<p><strong>Question:</strong> How are cache creation tokens tracked for OpenAI and Anthropic direct? Is this Bedrock-only? If not, billing will be inaccurate for direct provider usage with prompt caching.</p>
<hr>
<h3>‚ùì AWS Bedrock credential fallback behavior</h3>
<p><strong>Context:</strong> Bedrock registration conditionally includes explicit credentials, falling back to AWS SDK credential chain.</p>
<p><strong>Questions:</strong></p>
<ol>
<li>Is IAM role-based auth the recommended production method?</li>
<li>Should credential chain order be documented for compliance audits?</li>
<li>Are there environments where auto-discovery should NOT happen (prevent accidental credential use)?</li>
</ol>
<hr>
<h3>‚ùì Strategic implications of exposing model costs</h3>
<p><strong>Context:</strong> <code>ClientAIModelConfig</code> exposes exact per-token costs via GraphQL.</p>
<p><strong>Questions:</strong></p>
<ol>
<li>Is pricing transparency intentional (trust-building) or accidental?</li>
<li>Could competitors scrape this to undercut pricing?</li>
<li>Can users game the system with cost optimization scripts?</li>
<li>Should you show user-facing prices (with margin) instead of raw costs?</li>
</ol>
<hr>
<h3>‚ùì Model deprecation policy</h3>
<p><strong>Context:</strong> <code>o3</code>, <code>o4-mini</code>, <code>gpt-4o</code>, <code>gpt-4o-mini</code>, <code>gpt-4-turbo</code> marked deprecated.</p>
<p><strong>Questions:</strong></p>
<ol>
<li>What&#39;s the user communication plan (email, in-app warning, docs)?</li>
<li>How much advance notice before deprecated models stop working?</li>
<li>Which replacement model for each deprecated model?</li>
<li>What&#39;s the revenue impact if users migrate to cheaper alternatives?</li>
</ol>
<hr>
<h2>Files Reviewed</h2>
<h3>High-Impact Changes (3+ findings)</h3>
<table>
<thead>
<tr>
<th>File</th>
<th>Issues</th>
<th>Categories</th>
</tr>
</thead>
<tbody><tr>
<td><a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-billing/services/ai-billing.service.ts">ai-billing.service.ts</a></td>
<td>4</td>
<td>Blocker (logic), Warning (architecture), Suggestion (util)</td>
</tr>
<tr>
<td><a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/services/ai-model-registry.service.ts">ai-model-registry.service.ts</a></td>
<td>6</td>
<td>Blocker (schema), Warning (validation, perf), Questions (2)</td>
</tr>
<tr>
<td><a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/constants/ai-models-types.const.ts">ai-models-types.const.ts</a></td>
<td>2</td>
<td>Blocker (schema), Warning (enum)</td>
</tr>
</tbody></table>
<h3>New Files (provider support)</h3>
<ul>
<li>‚úÖ <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/constants/bedrock-models.const.ts">bedrock-models.const.ts</a> ‚Äî AWS Bedrock model configs</li>
<li>‚úÖ <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/constants/google-models.const.ts">google-models.const.ts</a> ‚Äî Google AI/Gemini configs</li>
<li>‚úÖ <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-models/constants/mistral-models.const.ts">mistral-models.const.ts</a> ‚Äî Mistral AI configs</li>
</ul>
<h3>Test Coverage</h3>
<p>‚úÖ <strong>Comprehensive</strong> ‚Äî <a href="packages/twenty-server/src/engine/metadata-modules/ai/ai-billing/services/__tests__/ai-billing.service.spec.ts">ai-billing.service.spec.ts</a> covers:</p>
<ul>
<li>Basic token usage</li>
<li>Cached token pricing (OpenAI vs. Anthropic accounting)</li>
<li>Reasoning tokens</li>
<li>Cache creation tokens</li>
</ul>
<hr>
<h2>Review Methodology</h2>
<p><strong>Context Sources:</strong></p>
<ul>
<li>Primary: CLAUDE.md (project standards)</li>
<li>Stack rules: TypeScript (58 rules), NestJS (63 rules)</li>
<li>Domains: ai-configuration, ai-billing, ai-providers, graphql-schema</li>
<li>Stacks: typescript, nestjs, react, graphql, jest-vitest</li>
</ul>
<p><strong>Review Coverage:</strong></p>
<ul>
<li>‚úÖ General (logic, quality, testing, side effects)</li>
<li>‚úÖ Security (OWASP Top 10, secrets, auth)</li>
<li>‚úÖ Performance (queries, computation, caching)</li>
<li>‚úÖ Architecture (separation of concerns, extensibility)</li>
<li>‚úÖ Business (user impact, revenue, deployment risk)</li>
</ul>
<hr>
<h2>Recommended Next Steps</h2>
<h3>Before Merge (Required)</h3>
<ol>
<li>‚úÖ Fix 3 blockers (duplicate calc, missing field, schema mismatch)</li>
<li>‚úÖ Validate billing across all 6 providers with integration tests</li>
<li>‚ö†Ô∏è Make conscious decision on pricing transparency</li>
<li>‚ö†Ô∏è Document model deprecation policy and user migration path</li>
</ol>
<h3>After Deployment (Week 1)</h3>
<ol>
<li>Billing reconciliation audit (provider invoices vs. customer charges)</li>
<li>Monitor support tickets for billing/deprecation confusion</li>
<li>Track new provider adoption rates (Bedrock, Google, Mistral)</li>
</ol>
<h3>Strategic (1-3 months)</h3>
<ol>
<li>Close first AWS Bedrock-enabled enterprise deal</li>
<li>Evaluate Strategy pattern refactoring for token accounting</li>
<li>Consider database-backed pricing if updates become frequent</li>
</ol>
<hr>
<p><strong>Overall Assessment:</strong> Strong refactoring with comprehensive test coverage. Fix 3 critical issues before merge. High business value (AWS enterprise unlocked, multi-cloud strategy). Medium risk due to billing accuracy concerns and strategic pricing decisions needed.</p>
</div> </div> </div> <!-- Bottom note --> <p class="text-center text-xs text-white/20 mt-6" data-astro-cid-v2zj7lir>
Reviews generated using GitHub Copilot with default settings (left) vs. PRR Kit structured workflow (right).
</p> </div> </section> <!-- ‚îÄ‚îÄ Fullscreen Modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ --> <div id="fs-modal" class="fixed inset-0 z-[9999] flex flex-col bg-black/95 backdrop-blur-md opacity-0 pointer-events-none transition-opacity duration-200" aria-modal="true" role="dialog" data-astro-cid-v2zj7lir> <!-- Modal header --> <div class="flex items-center gap-4 px-6 py-4 border-b border-white/10 flex-shrink-0" data-astro-cid-v2zj7lir> <div class="flex gap-1.5" data-astro-cid-v2zj7lir> <span class="w-3 h-3 rounded-full bg-red-500/60" data-astro-cid-v2zj7lir></span> <span class="w-3 h-3 rounded-full bg-yellow-500/60" data-astro-cid-v2zj7lir></span> <span class="w-3 h-3 rounded-full bg-green-500/60" data-astro-cid-v2zj7lir></span> </div> <span id="fs-title" class="text-sm font-semibold text-white/60 uppercase tracking-widest ml-1" data-astro-cid-v2zj7lir></span> <div class="ml-auto flex items-center gap-3" data-astro-cid-v2zj7lir> <span class="text-xs text-white/25 hidden sm:block" data-astro-cid-v2zj7lir>Press <kbd class="px-1.5 py-0.5 bg-white/8 border border-white/10 rounded text-[10px] font-mono" data-astro-cid-v2zj7lir>Esc</kbd> to close</span> <button id="fs-close" class="text-white/30 hover:text-white transition-colors cursor-pointer p-2 rounded-lg hover:bg-white/8" title="Close fullscreen" data-astro-cid-v2zj7lir> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.8" data-astro-cid-v2zj7lir> <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" data-astro-cid-v2zj7lir></path> </svg> </button> </div> </div> <!-- Modal body ‚Äî scrollable markdown content --> <div id="fs-body" class="overflow-y-auto flex-1 px-8 py-8 md-content md-content--modal max-w-6xl mx-auto w-full" data-astro-cid-v2zj7lir></div> </div> <script type="module">const t=document.getElementById("fs-modal"),s=document.getElementById("fs-title"),d=document.getElementById("fs-body"),l=document.getElementById("fs-close");function i(e,c){const o=document.getElementById(`content-${e}`);o&&(s.textContent=c,d.innerHTML=o.innerHTML,d.scrollTop=0,t.classList.remove("opacity-0","pointer-events-none"),document.body.style.overflow="hidden")}function n(){t.classList.add("opacity-0","pointer-events-none"),document.body.style.overflow=""}document.querySelectorAll(".fullscreen-btn").forEach(e=>{e.addEventListener("click",()=>{i(e.dataset.variant,e.dataset.title)})});l.addEventListener("click",n);t.addEventListener("click",e=>{e.target===t&&n()});document.addEventListener("keydown",e=>{e.key==="Escape"&&n()});</script>  <section id="quick-start" class="py-24 px-6 border-t border-white/10"> <div class="max-w-6xl mx-auto"> <!-- Header --> <div class="text-center mb-16 flex flex-col justify-center items-center"> <span class="_badge_19a8b_1 _outline_19a8b_22 _round_19a8b_74 text-xs mb-6"> Quick Start </span> <h2 class="text-4xl md:text-5xl font-black tracking-tight text-white mb-4">
Up in 3 steps
</h2> <p class="text-white/50 text-lg max-w-xl mx-auto">
Install, answer a few prompts, start reviewing.
</p> </div> <div class="grid md:grid-cols-3 gap-6 mb-12"> <div class="relative min-w-0"> <!-- Step number --> <div class="flex items-center gap-3 mb-4"> <div class="w-8 h-8 bg-white text-black rounded-full flex items-center justify-center text-sm font-black flex-shrink-0"> 1 </div> <h3 class="font-bold text-white text-sm">Install into your repo</h3> </div> <!-- Code block --> <div class="bg-white/5 border border-white/10 rounded-xl overflow-hidden mb-3"> <div class="flex items-center justify-between px-4 py-2.5 border-b border-white/10"> <div class="flex items-center gap-1.5"> <div class="w-2.5 h-2.5 rounded-full bg-white/15"></div> <div class="w-2.5 h-2.5 rounded-full bg-white/15"></div> <div class="w-2.5 h-2.5 rounded-full bg-white/15"></div> </div> <button onclick="navigator.clipboard.writeText(&#34;npx prr-kit install&#34;)" class="text-xs text-white/30 hover:text-white transition-colors cursor-pointer">
Copy
</button> </div> <pre class="min-h-[170px] p-4 text-xs font-mono text-white/70 overflow-x-auto leading-relaxed"><code>npx prr-kit install</code></pre> </div> <p class="text-xs text-white/40 leading-relaxed">Run the interactive installer. It guides you through everything.</p> </div><div class="relative min-w-0"> <!-- Step number --> <div class="flex items-center gap-3 mb-4"> <div class="w-8 h-8 bg-white text-black rounded-full flex items-center justify-center text-sm font-black flex-shrink-0"> 2 </div> <h3 class="font-bold text-white text-sm">Answer a few quick questions</h3> </div> <!-- Code block --> <div class="bg-white/5 border border-white/10 rounded-xl overflow-hidden mb-3"> <div class="flex items-center justify-between px-4 py-2.5 border-b border-white/10"> <div class="flex items-center gap-1.5"> <div class="w-2.5 h-2.5 rounded-full bg-white/15"></div> <div class="w-2.5 h-2.5 rounded-full bg-white/15"></div> <div class="w-2.5 h-2.5 rounded-full bg-white/15"></div> </div> <button class="text-xs text-white/30 hover:text-white transition-colors cursor-pointer invisible">
Copy
</button> </div> <pre class="min-h-[170px] p-4 text-xs font-mono text-white/70 overflow-x-auto leading-relaxed"><code>‚óÜ What should reviewers call you? ‚Ä∫ Alex
‚óÜ Language for reviewer agents? ‚Ä∫ English
‚óÜ GitHub repo for posting comments?
  ‚Ä∫ owner/repo  (optional, blank = local mode)
‚óÜ Which IDEs to configure? ‚Ä∫ Claude Code</code></pre> </div> <p class="text-xs text-white/40 leading-relaxed">Config is written automatically. No file editing needed.</p> </div> <!-- Step 3: dynamically updated based on selected IDE --> <div class="relative min-w-0"> <div class="flex items-center gap-3 mb-4"> <div class="w-8 h-8 bg-white text-black rounded-full flex items-center justify-center text-sm font-black flex-shrink-0">3</div> <h3 class="font-bold text-white text-sm">Start reviewing</h3> </div> <div class="bg-white/5 border border-white/10 rounded-xl overflow-hidden mb-3"> <div class="flex items-center justify-between px-4 py-2.5 border-b border-white/10"> <!-- IDE badge --> <div id="step3-ide-badge" class="flex items-center gap-1.5"> <div class="w-2.5 h-2.5 rounded-full bg-white/15"></div> <div class="w-2.5 h-2.5 rounded-full bg-white/15"></div> <div class="w-2.5 h-2.5 rounded-full bg-white/15"></div> </div> <button id="step3-copy" class="text-xs text-white/30 hover:text-white transition-colors cursor-pointer">Copy</button> </div> <pre class="min-h-[170px] p-4 text-xs font-mono overflow-x-auto leading-relaxed"><code id="step3-code" class="text-white/70">/prr-quick</code></pre> </div> <p class="text-xs text-white/40 leading-relaxed" id="step3-desc">One command runs the full pipeline: select PR, review, report.</p> </div> </div> <!-- Alternative: silent install --> <div class="p-6 bg-white/3 border border-white/10 rounded-2xl"> <div class="text-xs font-bold text-white/30 uppercase tracking-widest mb-3">Silent install (non-interactive)</div> <div class="bg-black/50 border border-white/10 rounded-lg overflow-hidden"> <div class="flex items-center justify-between px-4 py-2.5 border-b border-white/10"> <span class="text-xs text-white/30 font-mono">bash</span> <button onclick="navigator.clipboard.writeText(&#34;npx prr-kit install --directory /path/to/repo --modules prr --tools claude-code --yes&#34;)" class="text-xs text-white/30 hover:text-white transition-colors cursor-pointer">
Copy
</button> </div> <pre class="p-4 text-xs font-mono text-white/60 overflow-x-auto"><code><span class="text-white/30">$</span> npx prr-kit install <span class="text-white/50">--directory</span> /path/to/repo <span class="text-white/50">--modules</span> prr <span class="text-white/50">--tools</span> claude-code <span class="text-white/50">--yes</span></code></pre> </div> </div> </div> </section> <script type="module" src="/_astro/QuickStart.astro_astro_type_script_index_0_lang.CwBI5yh3.js"></script> <section id="how-it-works" class="py-24 px-6 border-t border-white/10"> <div class="max-w-6xl mx-auto"> <!-- Header --> <div class="text-center mb-16 flex flex-col justify-center items-center"> <span class="_badge_19a8b_1 _outline_19a8b_22 _round_19a8b_74 text-xs mb-6"> Pipeline </span> <h2 class="text-4xl md:text-5xl font-black tracking-tight text-white mb-4">
How it works
</h2> <p class="text-white/50 text-lg max-w-xl mx-auto">
From PR selection to inline comments, fully orchestrated.
</p> </div> <!-- Pipeline visualization --> <div class="rounded-2xl overflow-hidden border border-white/10"> <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-px bg-white/10"> <!-- Step 01: full-width spanning all 3 columns --> <div class="relative p-8 bg-black hover:bg-white/3 transition-colors group md:col-span-2 lg:col-span-3"> <div class="text-6xl font-black text-white/5 absolute top-4 right-6 select-none group-hover:text-white/8 transition-colors"> 01 </div> <div class="relative"> <div class="font-mono text-xs text-white/30 mb-3 tracking-wider" data-step-command="01">/prr-master</div> <h3 class="text-base font-bold text-white mb-2">Start the Agent</h3> <p class="text-sm text-white/40 leading-relaxed">Invoke the PRR Master agent from your IDE. It reads your _prr/ configuration and presents the full workflow menu.</p> </div> </div> <div class="relative p-8 bg-black hover:bg-white/3 transition-colors group"> <!-- Step number --> <div class="text-6xl font-black text-white/5 absolute top-4 right-6 select-none group-hover:text-white/8 transition-colors"> 02 </div> <!-- Content --> <div class="relative"> <div class="font-mono text-xs text-white/30 mb-3 tracking-wider" data-step-command="02">Select PR</div> <h3 class="text-base font-bold text-white mb-2">Select Your PR</h3> <p class="text-sm text-white/40 leading-relaxed">List open PRs from your Git platform or select branches manually. The diff loads directly into AI context.</p> </div> </div><div class="relative p-8 bg-black hover:bg-white/3 transition-colors group"> <!-- Step number --> <div class="text-6xl font-black text-white/5 absolute top-4 right-6 select-none group-hover:text-white/8 transition-colors"> 03 </div> <!-- Content --> <div class="relative"> <div class="font-mono text-xs text-white/30 mb-3 tracking-wider" data-step-command="03">Describe changes</div> <h3 class="text-base font-bold text-white mb-2">PR Description</h3> <p class="text-sm text-white/40 leading-relaxed">Classify PR type, generate a concise summary, and produce a file-by-file walkthrough of all changes.</p> </div> </div><div class="relative p-8 bg-black hover:bg-white/3 transition-colors group"> <!-- Step number --> <div class="text-6xl font-black text-white/5 absolute top-4 right-6 select-none group-hover:text-white/8 transition-colors"> 04 </div> <!-- Content --> <div class="relative"> <div class="font-mono text-xs text-white/30 mb-3 tracking-wider" data-step-command="04">Automatic</div> <h3 class="text-base font-bold text-white mb-2">PR-Specific Context</h3> <p class="text-sm text-white/40 leading-relaxed">Automatically collects fresh context for this PR: ESLint rules, CLAUDE.md, CONTRIBUTING.md, inline annotations, only what&#39;s relevant to changed files.</p> </div> </div><div class="relative p-8 bg-black hover:bg-white/3 transition-colors group"> <!-- Step number --> <div class="text-6xl font-black text-white/5 absolute top-4 right-6 select-none group-hover:text-white/8 transition-colors"> 05 </div> <!-- Content --> <div class="relative"> <div class="font-mono text-xs text-white/30 mb-3 tracking-wider" data-step-command="05">Deep code review</div> <h3 class="text-base font-bold text-white mb-2">Specialist Reviews</h3> <p class="text-sm text-white/40 leading-relaxed">A team of reviewer agents runs in parallel or sequence, each focused on a different dimension of code quality, using the fresh PR-specific context.</p> </div> </div><div class="relative p-8 bg-black hover:bg-white/3 transition-colors group"> <!-- Step number --> <div class="text-6xl font-black text-white/5 absolute top-4 right-6 select-none group-hover:text-white/8 transition-colors"> 06 </div> <!-- Content --> <div class="relative"> <div class="font-mono text-xs text-white/30 mb-3 tracking-wider" data-step-command="06">Generate report</div> <h3 class="text-base font-bold text-white mb-2">Generate Report</h3> <p class="text-sm text-white/40 leading-relaxed">All findings compiled into a Markdown report, sorted by severity from blockers to suggestions.</p> </div> </div><div class="relative p-8 bg-black hover:bg-white/3 transition-colors group"> <!-- Step number --> <div class="text-6xl font-black text-white/5 absolute top-4 right-6 select-none group-hover:text-white/8 transition-colors"> 07 </div> <!-- Content --> <div class="relative"> <div class="font-mono text-xs text-white/30 mb-3 tracking-wider" data-step-command="07">Post inline comments</div> <h3 class="text-base font-bold text-white mb-2">Post Inline Comments</h3> <p class="text-sm text-white/40 leading-relaxed">Optionally post findings as inline code comments on the exact file and line, identical to a human reviewer experience.</p> </div> </div> </div> </div> <!-- Quick mode callout --> <div class="mt-8 p-6 bg-white/3 border border-white/10 rounded-2xl flex flex-col md:flex-row items-center gap-4"> <div class="flex-shrink-0 w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center"> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"></path> </svg> </div> <div class="flex-1 text-center md:text-left"> <div class="font-bold text-white text-sm mb-1">Full control with the master agent</div> <p class="!my-0 text-xs text-white/40">Use <code id="prr-master-inline" class="font-mono bg-white/10 px-1.5 py-0.5 rounded">/prr-master</code> to access the full workflow menu. Run each step manually, mix and match reviewers, or explore any part of the pipeline independently.</p> </div> <div id="prr-master-badge" class="font-mono text-xs bg-white/10 border border-white/10 px-4 py-2 rounded-lg text-white/60 flex-shrink-0">
/prr-master
</div> </div> <!-- Severity legend --> <div class="mt-8 p-6 bg-white/3 border border-white/10 rounded-2xl"> <div class="text-xs font-bold text-white/30 uppercase tracking-widest mb-4">Severity Levels</div> <div class="grid grid-cols-2 md:grid-cols-4 gap-4"> <div class="flex items-start gap-2"> <span class="w-3 h-3 rounded-full flex-shrink-0 mt-0.5 bg-red-500"></span> <div> <div class="text-xs font-bold text-white/70">BLOCKER</div> <div class="text-xs text-white/30">Must fix before merge</div> </div> </div><div class="flex items-start gap-2"> <span class="w-3 h-3 rounded-full flex-shrink-0 mt-0.5 bg-yellow-400"></span> <div> <div class="text-xs font-bold text-white/70">WARNING</div> <div class="text-xs text-white/30">Should fix</div> </div> </div><div class="flex items-start gap-2"> <span class="w-3 h-3 rounded-full flex-shrink-0 mt-0.5 bg-green-500"></span> <div> <div class="text-xs font-bold text-white/70">SUGGESTION</div> <div class="text-xs text-white/30">Nice-to-have</div> </div> </div><div class="flex items-start gap-2"> <span class="w-3 h-3 rounded-full flex-shrink-0 mt-0.5 bg-blue-400"></span> <div> <div class="text-xs font-bold text-white/70">QUESTION</div> <div class="text-xs text-white/30">Needs clarification</div> </div> </div> </div> </div> </div> </section> <script type="module">const m={"claude-code":"/prr-master",cursor:"/prr-master",auggie:"/prr-master",crush:"/prr-master",iflow:"/prr-master",roo:"/prr-master",qwen:"/prr-master",codex:"/prr-master",gemini:"/prr-master",windsurf:"Workflows ‚Üí prr-master",cline:"Workflows ‚Üí prr-master","rovo-dev":"Workflows ‚Üí prr-master",trae:"Workflows ‚Üí prr-master",antigravity:"Workflows ‚Üí prr-master",opencode:"Commands ‚Üí prr-master",kilo:"Mode: prr-core-prr-master","github-copilot":"#prr-master",kiro:"@_prr/core/agents/prr-master.md"};function s(r){const e=m[r]||"/prr-master",t=document.getElementById("prr-master-inline"),o=document.getElementById("prr-master-badge");t&&(t.textContent=e),o&&(o.textContent=e);const a=document.querySelector('[data-step-command="01"]');a&&(a.textContent=e)}s(localStorage.getItem("prr-ide")||"");window.addEventListener("prr-ide-changed",r=>{s(r.detail)});</script> <section id="platforms" class="py-24 px-6 border-t border-white/10"> <div class="max-w-6xl mx-auto"> <!-- Header --> <div class="text-center mb-16 flex flex-col justify-center items-center"> <span class="_badge_19a8b_1 _outline_19a8b_22 _round_19a8b_74 text-xs mb-6"> Platform Support </span> <h2 class="text-4xl md:text-5xl font-black tracking-tight text-white mb-4">
Works where you work
</h2> <p class="text-white/50 text-lg max-w-xl mx-auto">
GitHub, GitLab, Azure DevOps, Bitbucket, or local mode with no CLI.
</p> </div> <!-- Platform cards --> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"> <div class="p-6 bg-white/3 border border-white/10 rounded-2xl hover:border-white/20 hover:bg-white/5 transition-all group text-center"> <div class="flex justify-center mb-4 text-white/60 group-hover:text-white/80 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0 1 12 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg></div> <div class="font-bold text-white text-sm mb-1">GitHub</div> <div class="font-mono text-xs text-white/30 mb-4">gh</div> <div class="space-y-1.5"> <div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> List open PRs </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Load diff </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Inline reviews </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Approve/reject </div> </div> </div><div class="p-6 bg-white/3 border border-white/10 rounded-2xl hover:border-white/20 hover:bg-white/5 transition-all group text-center"> <div class="flex justify-center mb-4 text-white/60 group-hover:text-white/80 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M4.845.904c-.435 0-.82.28-.955.692L.012 13.69a1.004 1.004 0 00.36 1.09l11.55 8.403a.998.998 0 001.165 0l11.55-8.402a1.004 1.004 0 00.36-1.09L21.088 1.6a1.004 1.004 0 00-.955-.692h-15.288zM12 15.52L8.09 4.125h7.818L12 15.52z"/></svg></div> <div class="font-bold text-white text-sm mb-1">GitLab</div> <div class="font-mono text-xs text-white/30 mb-4">glab</div> <div class="space-y-1.5"> <div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> List open MRs </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Load diff </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> MR discussions </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Approve/reject </div> </div> </div><div class="p-6 bg-white/3 border border-white/10 rounded-2xl hover:border-white/20 hover:bg-white/5 transition-all group text-center"> <div class="flex justify-center mb-4 text-white/60 group-hover:text-white/80 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M0 17.965v-12.32l4.32-4.32H19.2L24 6.13v11.557l-4.335 4.32H4.32L0 17.965zm19.657-1.097l2.538-2.546V7.323L19.2 5.04H5.46L1.806 8.58v6.89l2.514 2.398h15.337z"/></svg></div> <div class="font-bold text-white text-sm mb-1">Azure DevOps</div> <div class="font-mono text-xs text-white/30 mb-4">az</div> <div class="space-y-1.5"> <div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> List open PRs </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Git fallback diff </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> PR threads </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Approve/reject </div> </div> </div><div class="p-6 bg-white/3 border border-white/10 rounded-2xl hover:border-white/20 hover:bg-white/5 transition-all group text-center"> <div class="flex justify-center mb-4 text-white/60 group-hover:text-white/80 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor"><path d="M.778 1.213a.768.768 0 00-.768.892l3.263 19.81c.084.5.515.868 1.022.873H19.95a.772.772 0 00.77-.646l3.27-20.03a.768.768 0 00-.768-.891L.778 1.213zM14.52 15.53H9.522L8.17 8.466h7.561l-1.211 7.064z"/></svg></div> <div class="font-bold text-white text-sm mb-1">Bitbucket</div> <div class="font-mono text-xs text-white/30 mb-4">bb / curl</div> <div class="space-y-1.5"> <div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> List PRs </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Git fallback diff </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Inline comments </div><div class="flex items-center gap-2 text-xs text-white/40"> <svg class="w-3 h-3 text-white/30 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path> </svg> Core review </div> </div> </div> </div> <!-- Local mode callout --> <div class="p-6 bg-white/3 border border-white/10 rounded-2xl flex items-center gap-4"> <div class="flex-shrink-0 w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center"> <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"></path> </svg> </div> <div> <div class="font-bold text-white text-sm mb-1">None / Local mode</div> <p class="!my-0 text-xs text-white/40">All review analysis runs locally via <code class="font-mono bg-white/10 px-1.5 py-0.5 rounded">git diff</code>. No platform CLI required. Findings are saved to <code class="font-mono bg-white/10 px-1.5 py-0.5 rounded">_prr-output/reviews/</code> only.</p> </div> </div> </div> </section> <section class="py-24 px-6 border-t border-white/10"> <div class="max-w-6xl mx-auto"> <!-- Header --> <div class="text-center mb-16 flex flex-col justify-center items-center"> <span class="_badge_19a8b_1 _outline_19a8b_22 _round_19a8b_74 text-xs mb-6"> IDE Support </span> <h2 class="text-4xl md:text-5xl font-black tracking-tight text-white mb-4">
Works with your IDE
</h2> <p class="text-white/50 text-lg max-w-xl mx-auto">
Compatible with 18 AI IDEs. Use the one you already have.
</p> </div> <!-- Highlighted IDEs --> <div class="flex items-center flex-wrap gap-3 mb-8"> <div class="p-5 bg-white/5 border border-white/15 rounded-2xl text-center hover:border-white/25 hover:bg-white/8 transition-all group cursor-default"> <div class="w-12 h-12 bg-white/10 rounded-xl mx-auto mb-3 flex items-center justify-center group-hover:bg-white/15 transition-colors"> <img src="/logos/claude.svg" alt="Claude Code" width="28" height="28" class="object-contain"> </div> <div class="text-sm font-bold text-white">Claude Code</div> <div class="text-xs text-white/30 mt-0.5">Anthropic</div> </div><div class="p-5 bg-white/5 border border-white/15 rounded-2xl text-center hover:border-white/25 hover:bg-white/8 transition-all group cursor-default"> <div class="w-12 h-12 bg-white/10 rounded-xl mx-auto mb-3 flex items-center justify-center group-hover:bg-white/15 transition-colors"> <img src="/logos/cursor.webp" alt="Cursor" width="28" height="28" class="object-contain invert"> </div> <div class="text-sm font-bold text-white">Cursor</div> <div class="text-xs text-white/30 mt-0.5">Anysphere</div> </div><div class="p-5 bg-white/5 border border-white/15 rounded-2xl text-center hover:border-white/25 hover:bg-white/8 transition-all group cursor-default"> <div class="w-12 h-12 bg-white/10 rounded-xl mx-auto mb-3 flex items-center justify-center group-hover:bg-white/15 transition-colors"> <img src="/logos/windsurf.webp" alt="Windsurf" width="28" height="28" class="object-contain"> </div> <div class="text-sm font-bold text-white">Windsurf</div> <div class="text-xs text-white/30 mt-0.5">Codeium</div> </div><div class="p-5 bg-white/5 border border-white/15 rounded-2xl text-center hover:border-white/25 hover:bg-white/8 transition-all group cursor-default"> <div class="w-12 h-12 bg-white/10 rounded-xl mx-auto mb-3 flex items-center justify-center group-hover:bg-white/15 transition-colors"> <img src="/logos/github-copilot.webp" alt="GitHub Copilot" width="28" height="28" class="object-contain invert"> </div> <div class="text-sm font-bold text-white">GitHub Copilot</div> <div class="text-xs text-white/30 mt-0.5">GitHub</div> </div><div class="p-5 bg-white/5 border border-white/15 rounded-2xl text-center hover:border-white/25 hover:bg-white/8 transition-all group cursor-default"> <div class="w-12 h-12 bg-white/10 rounded-xl mx-auto mb-3 flex items-center justify-center group-hover:bg-white/15 transition-colors"> <img src="/logos/antigravity.webp" alt="Antigravity" width="28" height="28" class="object-contain"> </div> <div class="text-sm font-bold text-white">Antigravity</div> <div class="text-xs text-white/30 mt-0.5">Antigravity</div> </div> </div> <!-- Also supported --> <div class="p-6 bg-white/3 border border-white/10 rounded-2xl"> <div class="text-xs font-bold text-white/30 uppercase tracking-widest mb-5">Also supported</div> <div class="flex flex-wrap gap-2"> <span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Augment Code </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Cline </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Codex </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Crush </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Gemini CLI </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> iFlow </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Kilo </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Kiro </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> OpenCode </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> QwenCoder </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Roo Code </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Rovo Dev </span><span class="px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/50 hover:text-white/70 hover:border-white/20 transition-colors"> Trae </span> </div> </div> <!-- Requirements --> <div class="mt-8 grid md:grid-cols-2 gap-4"> <div class="p-6 bg-white/3 border border-white/10 rounded-2xl"> <div class="text-xs font-bold text-white/30 uppercase tracking-widest mb-4">Requirements</div> <div class="space-y-3"> <div class="flex items-center gap-3 text-sm"> <span class="text-white/30 w-5 text-center">‚¨°</span> <span class="text-white/60">Node.js 20+</span> </div><div class="flex items-center gap-3 text-sm"> <span class="text-white/30 w-5 text-center">‚å•</span> <span class="text-white/60">Git</span> </div><div class="flex items-center gap-3 text-sm"> <span class="text-white/30 w-5 text-center">‚óÜ</span> <span class="text-white/60">AI IDE of your choice</span> </div> </div> </div> <div class="p-6 bg-white/3 border border-white/10 rounded-2xl"> <div class="text-xs font-bold text-white/30 uppercase tracking-widest mb-4">Optional (for PR listing)</div> <div class="space-y-3"> <div class="flex items-center justify-between text-xs"> <code class="font-mono text-white/50 bg-white/5 px-2 py-1 rounded">gh (GitHub CLI)</code> <span class="text-white/25">GitHub</span> </div><div class="flex items-center justify-between text-xs"> <code class="font-mono text-white/50 bg-white/5 px-2 py-1 rounded">glab (GitLab CLI)</code> <span class="text-white/25">GitLab</span> </div><div class="flex items-center justify-between text-xs"> <code class="font-mono text-white/50 bg-white/5 px-2 py-1 rounded">az (Azure CLI + extension)</code> <span class="text-white/25">Azure DevOps</span> </div><div class="flex items-center justify-between text-xs"> <code class="font-mono text-white/50 bg-white/5 px-2 py-1 rounded">bb / curl (Bitbucket)</code> <span class="text-white/25">Bitbucket</span> </div> </div> </div> </div> </div> </section> <section class="py-24 px-6 border-t border-white/10"> <div class="max-w-6xl mx-auto"> <!-- Header --> <div class="text-center mb-16 flex flex-col justify-center items-center"> <span class="_badge_19a8b_1 _outline_19a8b_22 _round_19a8b_74 text-xs mb-6"> Support </span> <h2 class="text-4xl md:text-5xl font-black tracking-tight text-white mb-4">
Support the project
</h2> <p class="text-white/50 text-lg max-w-xl mx-auto">
PR Review Kit is free for everyone, and always will be.<br>
If you'd like to support development:
</p> </div> <!-- Cards --> <div class="flex flex-col sm:flex-row gap-6 justify-center max-w-2xl mx-auto"> <!-- Star on GitHub --> <a href="https://github.com/mrquangthai278/prr-kit" target="_blank" rel="noopener noreferrer" class="group flex-1 flex flex-col items-center text-center gap-5 rounded-2xl border border-white/10 bg-white/3 p-8 hover:border-white/20 hover:bg-white/5 transition-all duration-300"> <!-- Icon with glow --> <div class="relative"> <div class="absolute inset-0 blur-xl bg-white/10 rounded-full scale-150 group-hover:bg-white/15 transition-colors"></div> <div class="relative w-16 h-16 bg-white/8 border border-white/12 rounded-2xl flex items-center justify-center group-hover:bg-white/12 group-hover:border-white/20 transition-all duration-300"> <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="currentColor" class="text-white/80"> <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path> </svg> </div> </div> <div> <div class="font-bold text-white text-base mb-2">Star on GitHub</div> <div class="text-sm text-white/40 leading-relaxed">The easiest way to show your support. Takes one click.</div> </div> <div class="mt-auto text-xs font-semibold text-white/30 group-hover:text-white/60 transition-colors flex items-center gap-1.5">
Star the repo
<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"> <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path> </svg> </div> </a> <!-- Buy Me a Coffee --> <a href="https://buymeacoffee.com/mrquangthay" target="_blank" rel="noopener noreferrer" class="group flex-1 flex flex-col items-center text-center gap-5 rounded-2xl border border-white/10 bg-white/3 p-8 hover:border-white/20 hover:bg-white/5 transition-all duration-300"> <!-- Icon with glow --> <div class="relative"> <div class="absolute inset-0 blur-xl bg-yellow-500/10 rounded-full scale-150 group-hover:bg-yellow-500/15 transition-colors"></div> <div class="relative w-16 h-16 bg-white/8 border border-white/12 rounded-2xl flex items-center justify-center group-hover:bg-white/12 group-hover:border-white/20 transition-all duration-300"> <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round" class="text-white/80"> <path d="M18 8h1a4 4 0 0 1 0 8h-1"></path> <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path> <line x1="6" y1="1" x2="6" y2="4"></line> <line x1="10" y1="1" x2="10" y2="4"></line> <line x1="14" y1="1" x2="14" y2="4"></line> </svg> </div> </div> <div> <div class="font-bold text-white text-base mb-2">Buy Me a Coffee</div> <div class="text-sm text-white/40 leading-relaxed">Fuel the development directly.</div> </div> <div class="mt-auto text-xs font-semibold text-white/30 group-hover:text-white/60 transition-colors flex items-center gap-1.5">
Buy a coffee
<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"> <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path> </svg> </div> </a> </div> </div> </section> </main> <footer class="border-t border-white/10 py-16 px-6"> <div class="max-w-6xl mx-auto"> <!-- Top row --> <div class="flex flex-col md:flex-row items-center justify-between gap-8"> <!-- Logo + description --> <div class="text-center md:text-left max-w-sm"> <div class="flex items-center gap-2.5 justify-center md:justify-start mb-3"> <div class="w-7 h-7 bg-white rounded-md flex items-center justify-center"> <svg width="14" height="14" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M3 4.5L7.5 9L3 13.5" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> <path d="M9 13.5H15" stroke="#000" stroke-width="2" stroke-linecap="round"></path> </svg> </div> <span class="font-bold text-white tracking-tight">PR Review Kit</span> </div> <p class="text-sm text-white/40 leading-relaxed">
AI-driven Pull Request code review: structured, multi-perspective, actionable.
</p> </div> <!-- Links --> <div class="flex items-center gap-6"> <a href="https://github.com/mrquangthai278/prr-kit" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 text-sm text-white/50 hover:text-white transition-colors"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"> <path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0 1 12 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path> </svg>
GitHub
</a> <a href="https://github.com/mrquangthai278/prr-kit/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="text-sm text-white/50 hover:text-white transition-colors">
Contributing
</a> <a href="https://github.com/mrquangthai278/prr-kit/blob/master/LICENSE" target="_blank" rel="noopener noreferrer" class="text-sm text-white/50 hover:text-white transition-colors">
MIT License
</a> </div> </div> <!-- Divider --> <div class=""> <div class="flex flex-col md:flex-row items-center justify-between gap-4"> <p class="text-xs text-white/30">
¬© 2026 PR Review Kit. MIT License.
</p> <p class="text-xs text-white/20">
Made in Viet Nam
</p> </div> </div> </div> </footer>  </body></html>