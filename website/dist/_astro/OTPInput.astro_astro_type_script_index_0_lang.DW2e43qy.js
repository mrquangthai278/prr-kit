import{o as i}from"./DOMUtils.xVoLgT47.js";import{d as f}from"./event.C5jlCmtE.js";const u=(e,t,a)=>{const n=Number(t?.dataset.active),o=e==="next"?n+1:n-1,r=t?.querySelector(`[data-index="${o}"]`);r instanceof HTMLInputElement&&(r.focus(),a&&(r.value=""))},l=()=>{i('[data-id="w-input-otp"]',"keydown",e=>{const t=e.target;(e.key==="Backspace"||e.key==="Delete")&&(t.value||u("prev",t.parentElement,!0)),e.key==="ArrowLeft"&&u("prev",t.parentElement),e.key==="ArrowRight"&&u("next",t.parentElement)},!0),i('[data-id="w-input-otp"]',"input",e=>{const t=e.target;if(!(t instanceof HTMLInputElement))return;const a=Number(t.dataset.index),n=Array.from(t.parentElement?.querySelectorAll("input")||[]).findIndex(o=>!o.value)+1;if(n!==0&&n<a){const o=t.parentElement?.querySelector(`[data-index="${n}"]`),r=t.parentElement?.querySelector(`[data-index="${n+1}"]`);o instanceof HTMLInputElement&&(o.value=t.value),r instanceof HTMLInputElement&&r.focus(),t.value="";return}t.value&&u("next",t.parentElement)},!0),i('[data-id="w-input-otp"]',"keyup",e=>{const t=e.target,a=t instanceof HTMLInputElement?t.parentElement:null;if(a){const n=Array.from(a.querySelectorAll("input")||[]).map(o=>o.value).join("");f("otpOnChange",n)}},!0),i('[data-id="w-input-otp"]',"paste",e=>{e.preventDefault();const t=e.target,a=t instanceof HTMLInputElement?t.parentElement:null;if(a){const n=Number(a.dataset.length),o=e.clipboardData?.getData("text")??"",r=Math.min(o.length+1,n),c=a.querySelector(`[data-index="${r}"]`);c instanceof HTMLInputElement&&c.focus(),o.split("").slice(0,n).forEach((p,d)=>{const s=a.querySelector(`[data-index="${d+1}"]`);s instanceof HTMLInputElement&&(s.value=p)})}},!0),i('[data-id="w-input-otp"]',"focus",e=>{const t=e.target;t instanceof HTMLInputElement&&(t.parentElement&&(t.parentElement.dataset.active=t.dataset.index),setTimeout(()=>t.select(),0))},!0)};i(document,"astro:after-swap",l);l();
